<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ahmad Shakeel - DevOps Engineer & Software Developer</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;800&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {
            /* Professional DevOps Color Palette - Dark Mode (Eye-friendly) */
            --bg: #121212;                          /* Softer dark background */
            --bg-elevated: #1A1A2E;                 /* Elevated surfaces with depth */
            --accent: #0A2540;                      /* Deep navy - trust & innovation */
            --accent-bright: #1E3A5F;               /* Lighter navy for hover states */
            --secondary: #00B4D8;                   /* Teal cyan - highlights & CTAs */
            --secondary-dim: #0096B4;               /* Dimmed secondary for subtle accents */
            --tertiary: #06D6A0;                    /* Success green - for metrics/deployments */
            --warning: #F59E0B;                     /* Warning orange for CI states */
            --text-main: #F0F6FC;                   /* Softer white for primary text */
            --text-dim: #A0AEC0;                    /* Improved muted text - 4.5:1 contrast */
            --text-bright: #E2E8F0;                 /* Slightly dimmed white */
            --glass-bg: rgba(26, 26, 46, 0.85);    /* Semi-transparent elevated bg */
            --glass-border: rgba(48, 54, 61, 0.8); /* Subtle borders */
            --border: rgba(48, 54, 61, 0.6);       /* Standard borders */
            --glow: rgba(0, 180, 216, 0.25);       /* Secondary color glow */
            --glow-strong: rgba(0, 180, 216, 0.5); /* Strong glow for hovers */
            --blueprint: rgba(0, 180, 216, 0.03); /* Blueprint background tint */
        }

        body.light-mode {
            /* Light Mode - Professional & Clean */
            --bg: #F8FAFC;                          /* Softer light background */
            --bg-elevated: #FFFFFF;                 /* White elevated surfaces */
            --accent: #0A2540;                      /* Keep deep navy */
            --accent-bright: #1E3A5F;               /* Lighter navy */
            --secondary: #0077B6;                   /* Deeper teal for light mode */
            --secondary-dim: #005A8C;               /* Dimmed secondary */
            --tertiary: #059669;                    /* Success green adjusted */
            --warning: #D97706;                     /* Warning orange */
            --text-main: #1E293B;                   /* Dark gray for readability */
            --text-dim: #475569;                    /* Medium gray - better contrast */
            --text-bright: #334155;                 /* Slightly lighter dark */
            --glass-bg: rgba(255, 255, 255, 0.92); /* White glass */
            --glass-border: rgba(209, 213, 219, 0.8); /* Light borders */
            --border: rgba(209, 213, 219, 0.6);    /* Standard borders */
            --glow: rgba(0, 119, 182, 0.15);       /* Secondary glow */
            --glow-strong: rgba(0, 119, 182, 0.3); /* Strong glow */
            --blueprint: rgba(0, 119, 182, 0.02); /* Blueprint background tint */
        }

        body, html {
            margin: 0; padding: 0;
            background-color: var(--bg);
            color: var(--text-main);
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 16px;
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            transition: background-color 0.3s, color 0.3s;
        }

        /* 3D Canvas */
        #webgl { position: fixed; top: 0; left: 0; z-index: 1; pointer-events: none; }

        /* Blueprint Background Pattern */
        .blueprint-bg {
            position: relative;
        }
        
        .blueprint-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(var(--blueprint) 1px, transparent 1px),
                linear-gradient(90deg, var(--blueprint) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            opacity: 0.5;
        }
        
        /* 3D Element Tooltip */
        .tooltip-3d {
            position: fixed;
            z-index: 3000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            transform: translate(-50%, -100%);
        }
        
        .tooltip-3d.visible {
            opacity: 1;
        }
        
        .tooltip-3d-content {
            background: linear-gradient(135deg, rgba(10, 37, 64, 0.98), rgba(2, 20, 40, 0.98));
            border: 2px solid var(--secondary);
            border-radius: 12px;
            padding: 14px 18px;
            min-width: 200px;
            max-width: 300px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5), 
                        0 0 30px rgba(0, 180, 216, 0.4),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
        }
        
        /* Light mode tooltip - high contrast dark background */
        body.light-mode .tooltip-3d-content {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.98), rgba(2, 6, 23, 0.98));
            border: 2px solid #00B4D8;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 
                        0 0 30px rgba(0, 180, 216, 0.5),
                        0 0 0 1px rgba(0, 180, 216, 0.3);
        }
        
        body.light-mode .tooltip-3d-title {
            color: #ffffff;
        }
        
        body.light-mode .tooltip-3d-desc {
            color: rgba(255, 255, 255, 0.85);
        }
        
        body.light-mode .tooltip-3d-stat span {
            color: rgba(255, 255, 255, 0.8);
        }
        
        body.light-mode .tooltip-3d-pointer {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.98), rgba(2, 6, 23, 0.98));
            border-color: #00B4D8;
        }
        
        .tooltip-3d-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 180, 216, 0.4);
        }
        
        .tooltip-3d-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 1.1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .tooltip-3d-icon.aws { background: rgba(255, 153, 0, 0.25); color: #FF9900; border: 1px solid rgba(255, 153, 0, 0.4); }
        .tooltip-3d-icon.docker { background: rgba(36, 150, 237, 0.25); color: #2496ED; border: 1px solid rgba(36, 150, 237, 0.4); }
        .tooltip-3d-icon.k8s { background: rgba(50, 108, 229, 0.25); color: #326CE5; border: 1px solid rgba(50, 108, 229, 0.4); }
        .tooltip-3d-icon.terraform { background: rgba(123, 66, 188, 0.25); color: #7B42BC; border: 1px solid rgba(123, 66, 188, 0.4); }
        .tooltip-3d-icon.helm { background: rgba(15, 22, 137, 0.3); color: #6366F1; border: 1px solid rgba(99, 102, 241, 0.4); }
        .tooltip-3d-icon.cicd { background: rgba(6, 214, 160, 0.25); color: #06D6A0; border: 1px solid rgba(6, 214, 160, 0.4); }
        .tooltip-3d-icon.network { background: rgba(0, 180, 216, 0.25); color: #00B4D8; border: 1px solid rgba(0, 180, 216, 0.4); }
        
        .tooltip-3d-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: 0.5px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .tooltip-3d-type {
            font-size: 0.68rem;
            color: #00B4D8;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            font-weight: 600;
        }
        
        .tooltip-3d-desc {
            font-size: 0.78rem;
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .tooltip-3d-stats {
            display: flex;
            gap: 14px;
            flex-wrap: wrap;
            padding-top: 8px;
            border-top: 1px solid rgba(0, 180, 216, 0.2);
        }
        
        .tooltip-3d-stat {
            display: flex;
            align-items: center;
            gap: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.72rem;
        }
        
        .tooltip-3d-stat i {
            font-size: 0.7rem;
            color: #06D6A0;
        }
        
        .tooltip-3d-stat span {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .tooltip-3d-pointer {
            width: 14px;
            height: 14px;
            background: linear-gradient(135deg, rgba(10, 37, 64, 0.98), rgba(2, 20, 40, 0.98));
            border-right: 2px solid var(--secondary);
            border-bottom: 2px solid var(--secondary);
            transform: rotate(45deg);
            position: absolute;
            bottom: -8px;
            left: 50%;
            margin-left: -7px;
        }
        
        /* 3D Legend Panel */
        .legend-3d {
            position: fixed;
            bottom: 30px;
            left: 30px;
            z-index: 100;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 15px 20px;
            font-family: 'JetBrains Mono', monospace;
            max-width: 280px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .legend-3d-toggle {
            position: absolute;
            top: -12px;
            right: -12px;
            width: 28px;
            height: 28px;
            background: var(--secondary);
            border: none;
            border-radius: 50%;
            color: var(--bg);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            transition: all 0.3s ease;
        }
        
        .legend-3d-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px var(--glow-strong);
        }
        
        .legend-3d.collapsed {
            padding: 10px 15px;
        }
        
        .legend-3d.collapsed .legend-3d-items {
            display: none;
        }
        
        .legend-3d-title {
            font-size: 0.7rem;
            color: var(--secondary);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-3d-title i {
            font-size: 0.8rem;
        }
        
        .legend-3d-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .legend-3d-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.7rem;
            color: var(--text-dim);
            cursor: pointer;
            padding: 5px 8px;
            border-radius: 6px;
            transition: all 0.2s ease;
        }
        
        .legend-3d-item:hover {
            background: rgba(0, 180, 216, 0.1);
            color: var(--text-main);
        }
        
        .legend-3d-color {
            width: 14px;
            height: 14px;
            border-radius: 4px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .legend-3d-color.k8s { background: #326CE5; }
        .legend-3d-color.ec2 { background: #FF9900; }
        .legend-3d-color.docker { background: #2496ED; }
        .legend-3d-color.lambda { background: #FF9900; border-radius: 50%; }
        .legend-3d-color.terraform { background: #7B42BC; }
        .legend-3d-color.helm { background: #0F1689; }
        .legend-3d-color.cicd { background: #06D6A0; }
        .legend-3d-color.traffic { background: linear-gradient(90deg, #00B4D8, #06D6A0); }
        
        @media (max-width: 768px) {
            .legend-3d {
                bottom: 20px;
                left: 20px;
                max-width: 220px;
                padding: 12px 15px;
            }
            
            .tooltip-3d-content {
                min-width: 150px;
                max-width: 220px;
                padding: 10px 12px;
            }
        }

        /* Full Architecture View Button */
        .view-architecture-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            background: linear-gradient(135deg, var(--secondary), var(--tertiary));
            border: none;
            border-radius: 50px;
            padding: 14px 24px;
            color: var(--bg);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 20px rgba(0, 180, 216, 0.4), 0 0 40px rgba(0, 180, 216, 0.2);
            transition: all 0.3s ease;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        .view-architecture-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 30px rgba(0, 180, 216, 0.5), 0 0 60px rgba(0, 180, 216, 0.3);
        }

        .view-architecture-btn i {
            font-size: 1rem;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 4px 20px rgba(0, 180, 216, 0.4), 0 0 40px rgba(0, 180, 216, 0.2); }
            50% { box-shadow: 0 4px 30px rgba(6, 214, 160, 0.5), 0 0 60px rgba(6, 214, 160, 0.3); }
        }

        /* Full Architecture Modal Overlay */
        .architecture-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 2000;
            background: var(--bg);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }

        .architecture-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .architecture-modal canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100% !important;
            height: 100% !important;
            display: block;
        }

        .architecture-modal-header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to bottom, rgba(18, 18, 18, 0.95), transparent);
            z-index: 10;
        }

        .architecture-modal-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .architecture-modal-title i {
            color: var(--secondary);
        }

        .architecture-modal-close {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            padding: 10px 20px;
            color: var(--text-main);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .architecture-modal-close:hover {
            background: rgba(255, 100, 100, 0.2);
            border-color: #ff6b6b;
            color: #ff6b6b;
        }

        .architecture-modal-controls {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            padding: 15px 25px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            backdrop-filter: blur(20px);
            z-index: 10;
        }

        .architecture-control-btn {
            width: 45px;
            height: 45px;
            background: rgba(0, 180, 216, 0.1);
            border: 1px solid var(--secondary);
            border-radius: 50%;
            color: var(--secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .architecture-control-btn:hover {
            background: var(--secondary);
            color: var(--bg);
            transform: scale(1.1);
        }

        .architecture-control-btn.active {
            background: var(--secondary);
            color: var(--bg);
        }

        .architecture-control-divider {
            width: 1px;
            background: var(--glass-border);
        }

        .architecture-modal-hint {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-dim);
            text-align: center;
            z-index: 10;
            opacity: 0.7;
        }
        
        /* Show/hide hints based on device */
        .mobile-hint {
            display: none;
        }
        
        @media (hover: none) and (pointer: coarse) {
            .desktop-hint {
                display: none;
            }
            .mobile-hint {
                display: block;
            }
        }

        .architecture-modal-hint i {
            margin-right: 6px;
            color: var(--secondary);
        }

        @media (max-width: 768px) {
            .view-architecture-btn {
                bottom: 20px;
                right: 20px;
                padding: 12px 18px;
                font-size: 0.75rem;
            }

            .view-architecture-btn span {
                display: none;
            }

            .architecture-modal-header {
                padding: 15px 20px;
            }

            .architecture-modal-controls {
                bottom: 20px;
                padding: 10px 15px;
                gap: 10px;
            }

            .architecture-control-btn {
                width: 40px;
                height: 40px;
            }
        }

        /* Sticky Side Navigation */
        .side-nav {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 150;
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 20px 15px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .side-nav-link {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-dim);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
        }

        .side-nav-link:hover,
        .side-nav-link.active {
            color: var(--secondary);
            background: rgba(0, 180, 216, 0.1);
            box-shadow: 0 0 15px var(--glow);
        }

        .side-nav-link::after {
            content: attr(data-tooltip);
            position: absolute;
            right: 55px;
            padding: 8px 12px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            color: var(--text-main);
            font-family: 'JetBrains Mono';
            font-size: 0.7rem;
            white-space: nowrap;
            border-radius: 6px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            pointer-events: none;
        }

        .side-nav-link:hover::after {
            opacity: 1;
            visibility: visible;
            right: 50px;
        }

        /* Mobile Side Nav Toggle */
        .side-nav-toggle {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 200;
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: var(--secondary);
            color: var(--bg);
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 20px var(--glow-strong);
            font-size: 1.2rem;
        }
        
        .side-nav-toggle:active {
            transform: scale(0.95);
        }

        @media (max-width: 768px) {
            .side-nav {
                right: 20px;
                left: auto;
                top: 80px;
                bottom: auto;
                transform: none;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
                max-height: 70vh;
                overflow-y: auto;
            }
            
            .side-nav.open {
                opacity: 1;
                visibility: visible;
            }
            
            .side-nav-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

        /* Social Links Bar */
        .social-bar {
            position: fixed;
            left: 30px;
            bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            z-index: 100;
        }

        .social-bar::after {
            content: '';
            width: 1px;
            height: 100px;
            background: var(--border);
        }

        .social-link {
            color: var(--text-dim);
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            color: var(--secondary);
            transform: translateY(-3px) scale(1.1);
        }

        @media (max-width: 768px) {
            .social-bar {
                display: none;
            }
        }

        /* UI Overlay */
        .nav {
            position: fixed; top: 0; width: 100%; padding: 30px;
            display: flex; justify-content: space-between; align-items: center;
            box-sizing: border-box; z-index: 100; font-family: 'JetBrains Mono';
            font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px;
        }

        .mode-toggle {
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            border: 1px solid var(--border);
            background: var(--glass-bg);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .mode-toggle:hover {
            border-color: var(--secondary);
            box-shadow: 0 0 15px var(--glow);
        }

        .mode-toggle-icon {
            font-size: 1rem;
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .mode-toggle-text {
            font-size: 0.7rem;
        }

        body.light-mode .mode-toggle-icon {
            transform: rotate(360deg);
        }

        /* Global transition for theme changes */
        *, *::before, *::after {
            transition: background-color 0.4s ease, border-color 0.4s ease, color 0.4s ease, box-shadow 0.4s ease;
        }

        /* Exclude animations from theme transition */
        .hero-title, .timeline-dot, .project-particles, canvas {
            transition: none;
        }

        .content { position: relative; z-index: 2; }

        section {
            min-height: 100vh; display: flex; align-items: center;
            padding: 0 10%; box-sizing: border-box;
        }

        /* Hero Text */
        .hero-title {
            font-size: clamp(4rem, 12vw, 10rem);
            font-weight: 800; line-height: 0.85;
            margin: 0; letter-spacing: -0.05em;
            background: linear-gradient(135deg, var(--text-main) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 80px var(--glow);
        }

        .hero-title .accent {
            -webkit-text-fill-color: var(--secondary);
            text-shadow: 0 0 40px var(--glow);
        }

        .hero-position {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .position-badge {
            font-family: 'JetBrains Mono', monospace;
            font-size: clamp(1rem, 2.5vw, 1.4rem);
            font-weight: 600;
            color: var(--text-main);
            padding: 12px 24px;
            background: linear-gradient(135deg, rgba(0, 180, 216, 0.15), rgba(6, 214, 160, 0.1));
            border: 2px solid var(--secondary);
            border-radius: 8px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 20px rgba(0, 180, 216, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            animation: positionPulse 3s ease-in-out infinite;
        }

        .position-badge:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0, 180, 216, 0.4);
            border-color: var(--tertiary);
        }

        .position-badge i {
            color: var(--secondary);
            font-size: 1.2em;
        }

        .position-divider {
            color: var(--secondary);
            font-size: 1.5rem;
            opacity: 0.5;
        }

        @keyframes positionPulse {
            0%, 100% { box-shadow: 0 4px 20px rgba(0, 180, 216, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1); }
            50% { box-shadow: 0 4px 30px rgba(0, 180, 216, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1); }
        }

        /* Light mode adjustments for position badges */
        body.light-mode .position-badge {
            background: linear-gradient(135deg, rgba(0, 180, 216, 0.1), rgba(6, 214, 160, 0.08));
            box-shadow: 0 4px 20px rgba(0, 119, 182, 0.15), 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        body.light-mode .position-badge:hover {
            box-shadow: 0 8px 30px rgba(0, 119, 182, 0.25);
        }

        @media (max-width: 600px) {
            .hero-position {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            .position-divider {
                display: none;
            }
            .position-badge {
                padding: 10px 18px;
            }
        }

        .sub-title {
            font-family: 'JetBrains Mono'; color: var(--secondary);
            margin-bottom: 20px; display: block;
        }

        .hero-subtitle {
            font-family: 'JetBrains Mono';
            font-size: clamp(0.9rem, 2vw, 1.2rem);
            color: var(--secondary);
            margin-bottom: 25px;
            display: block;
            letter-spacing: 3px;
            text-transform: uppercase;
            opacity: 0.9;
        }

        .hero-bio {
            color: var(--text-dim);
            max-width: 650px;
            font-size: 1rem;
            line-height: 1.8;
            margin-top: 30px;
        }

        .hero-bio .highlight {
            color: var(--secondary);
            font-family: 'JetBrains Mono';
            font-size: 0.95em;
        }

        /* Terminal-style code snippets */
        .terminal-text {
            font-family: 'JetBrains Mono';
            background: rgba(0, 180, 216, 0.08);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.9em;
            border-left: 2px solid var(--secondary);
        }

        .hero-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 25px;
            max-width: 600px;
        }

        .hero-tag {
            font-family: 'JetBrains Mono';
            font-size: 0.7rem;
            padding: 8px 15px;
            border: 1px solid var(--border);
            background: var(--glass-bg);
            color: var(--text-dim);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .hero-tag i {
            color: var(--secondary);
        }

        .hero-tag:hover {
            border-color: var(--secondary);
            color: var(--secondary);
            box-shadow: 0 0 15px var(--glow);
        }

        .hero-content {
            opacity: 1;
        }
        
        /* Terminal Banner */
        .terminal-banner {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 12px 20px;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            margin-bottom: 25px;
            animation: terminalSlideIn 0.8s ease-out;
        }
        
        @keyframes terminalSlideIn {
            from { 
                opacity: 0; 
                transform: translateY(-20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        .terminal-icon {
            color: var(--accent);
            font-size: 1rem;
        }
        
        .terminal-command {
            color: var(--text-dim);
        }
        
        .terminal-cursor {
            color: var(--secondary);
            animation: cursorBlink 1s infinite;
        }
        
        @keyframes cursorBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        /* Scroll Indicator */
        .scroll-indicator {
            margin-top: 40px;
            text-align: center;
        }
        
        .scroll-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--text-dim);
            opacity: 0.7;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            animation: scrollBounce 2s infinite;
        }
        
        .scroll-text i {
            font-size: 1rem;
            color: var(--secondary);
        }
        
        @keyframes scrollBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(8px); }
        }

        /* Glass Panels with Hover - Blueprint Style */
        .glass-panel {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-left: 3px solid var(--secondary);
            padding: 40px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            max-width: 500px;
            transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
            position: relative;
        }

        .glass-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(var(--blueprint) 1px, transparent 1px),
                linear-gradient(90deg, var(--blueprint) 1px, transparent 1px);
            background-size: 25px 25px;
            pointer-events: none;
            opacity: 0.3;
            border-radius: inherit;
        }

        .glass-panel:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 40px var(--glow-strong);
            border-left-color: var(--tertiary);
        }

        .skills-grid, .projects-grid, .certs-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px;
            margin-top: 30px; font-family: 'JetBrains Mono'; font-size: 0.7rem;
        }

        /* Enhanced Skills Section */
        .skills-section {
            max-width: 800px;
        }

        .skills-category {
            margin-bottom: 35px;
        }

        .skills-category:last-child {
            margin-bottom: 0;
        }

        .skills-category-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .skills-category-icon {
            font-size: 1.2rem;
        }

        .skills-category-title {
            font-family: 'JetBrains Mono';
            font-size: 0.75rem;
            color: var(--secondary);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .skills-grid-enhanced {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            font-family: 'JetBrains Mono';
        }

        .skill-item {
            font-size: 0.7rem;
            padding: 12px 15px;
            border: 1px solid var(--border);
            background: var(--glass-bg);
            color: var(--text-dim);
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        
        .skill-item::after {
            content: '●';
            position: absolute;
            top: 5px;
            right: 8px;
            font-size: 6px;
            color: var(--accent);
            opacity: 0.7;
            animation: statusBlink 3s infinite;
        }
        
        @keyframes statusBlink {
            0%, 90%, 100% { opacity: 0.7; }
            95% { opacity: 0.3; }
        }
        
        .skill-item.highlight::after {
            color: var(--secondary);
            animation: statusPulseSkill 2s infinite;
        }
        
        @keyframes statusPulseSkill {
            0%, 100% { opacity: 1; text-shadow: 0 0 3px var(--secondary); }
            50% { opacity: 0.5; text-shadow: none; }
        }

        .skill-item i {
            color: var(--secondary);
            font-size: 0.75rem;
        }

        .skill-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, var(--accent) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .skill-item:hover {
            border-color: var(--secondary);
            color: var(--secondary);
            box-shadow: 0 0 20px rgba(0, 180, 216, 0.3), inset 0 0 20px rgba(0, 180, 216, 0.05);
            transform: translateY(-2px);
        }

        .skill-item:hover::before {
            opacity: 0.1;
        }

        .skill-item.highlight {
            border-color: var(--secondary);
            background: rgba(0, 180, 216, 0.05);
        }

        /* Mobile: 2 columns */
        @media (max-width: 768px) {
            .skills-grid-enhanced {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .skill-item {
                padding: 10px 12px;
                font-size: 0.65rem;
            }

            .skills-section {
                max-width: 100%;
            }
        }

        .skill-tag, .project-card, .cert-tag {
            border: 1px solid var(--border);
            padding: 15px; text-align: center; transition: background 0.3s;
        }

        .skill-tag:hover, .cert-tag:hover {
            background: var(--accent); color: var(--bg);
        }

        /* Enhanced Projects Section */
        .projects-section {
            flex-direction: column;
            align-items: flex-start;
            padding-top: 100px;
            padding-bottom: 100px;
        }

        .projects-header {
            margin-bottom: 50px;
            text-align: left;
        }

        .projects-header h2 {
            font-size: clamp(1.5rem, 3vw, 2.5rem);
            margin: 10px 0;
        }

        .projects-header p {
            color: var(--text-dim);
            max-width: 600px;
        }

        /* Education & Certifications Section */
        .edu-certs-section {
            flex-direction: column;
            align-items: flex-start;
            padding-top: 100px;
            padding-bottom: 100px;
        }

        .edu-certs-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            width: 100%;
            max-width: 1100px;
        }

        .edu-certs-header {
            grid-column: 1 / -1;
            margin-bottom: 20px;
        }

        .edu-certs-header h2 {
            font-size: clamp(1.5rem, 3vw, 2.5rem);
            margin: 10px 0;
        }

        .edu-certs-header p {
            color: var(--text-dim);
            max-width: 600px;
        }

        /* Education Timeline */
        .education-column {
            position: relative;
        }

        .education-column-title {
            font-family: 'JetBrains Mono';
            font-size: 0.8rem;
            color: var(--secondary);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .education-column-title i {
            color: var(--secondary);
        }

        .edu-timeline {
            position: relative;
            padding-left: 30px;
        }

        .edu-timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 10px;
            bottom: 10px;
            width: 2px;
            background: linear-gradient(to bottom, var(--accent), var(--secondary));
        }

        .edu-item {
            position: relative;
            margin-bottom: 35px;
            opacity: 0;
        }

        .edu-item:last-child {
            margin-bottom: 0;
        }

        .edu-item::before {
            content: '';
            position: absolute;
            left: -34px;
            top: 8px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--bg);
            border: 3px solid var(--accent);
            transition: all 0.3s ease;
        }

        .edu-item:hover::before {
            background: var(--accent);
            box-shadow: 0 0 15px var(--accent);
        }

        .edu-item-years {
            font-family: 'JetBrains Mono';
            font-size: 0.7rem;
            color: var(--secondary);
            margin-bottom: 8px;
        }

        .edu-item-degree {
            font-weight: 800;
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: var(--text-main);
        }

        .edu-item-school {
            color: var(--text-dim);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .edu-item-detail {
            font-family: 'JetBrains Mono';
            font-size: 0.75rem;
            color: var(--secondary);
            padding: 5px 12px;
            background: rgba(10, 37, 64, 0.1);
            border: 1px solid rgba(10, 37, 64, 0.2);
            display: inline-block;
        }

        /* Certifications Column */
        .certs-column {
            position: relative;
        }

        .certs-column-title {
            font-family: 'JetBrains Mono';
            font-size: 0.8rem;
            color: var(--secondary);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .certs-column-title i {
            color: var(--secondary);
        }

        .certs-grid-enhanced {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .cert-card {
            background: var(--glass-bg);
            border: 1px solid var(--border);
            border-left: 3px solid var(--secondary);
            padding: 20px 25px;
            transition: all 0.3s ease;
            opacity: 0;
        }

        .cert-card:hover {
            border-left-color: var(--secondary);
            box-shadow: 0 0 25px rgba(10, 37, 64, 0.15);
            transform: translateX(5px);
        }

        .cert-card-title {
            font-weight: 800;
            font-size: 0.95rem;
            margin-bottom: 8px;
            color: var(--text-main);
        }

        .cert-card-issuer {
            font-family: 'JetBrains Mono';
            font-size: 0.7rem;
            color: var(--text-dim);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cert-card-issuer::before {
            content: '◆';
            color: var(--secondary);
            font-size: 0.5rem;
        }

        .cert-badge {
            font-family: 'JetBrains Mono';
            font-size: 0.6rem;
            padding: 4px 10px;
            background: rgba(0, 180, 216, 0.1);
            border: 1px solid rgba(0, 180, 216, 0.3);
            color: var(--secondary);
            margin-left: auto;
        }

        /* Mobile responsiveness for Education & Certs */
        @media (max-width: 768px) {
            .edu-certs-container {
                grid-template-columns: 1fr;
                gap: 50px;
            }

            .edu-certs-section {
                padding-top: 60px;
                padding-bottom: 60px;
            }
        }

        .projects-grid-enhanced {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 25px;
            width: 100%;
        }

        .project-card-enhanced {
            position: relative;
            background: var(--glass-bg);
            border: 1px solid var(--border);
            border-top: 3px solid var(--secondary);
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
        }

        .project-card-enhanced::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(10, 37, 64, 0.15) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .project-card-enhanced:hover {
            transform: scale(1.03) translateY(-5px);
            border-color: var(--secondary);
            box-shadow: 0 20px 40px rgba(10, 37, 64, 0.2), 0 0 30px rgba(10, 37, 64, 0.1);
        }

        .project-card-enhanced:hover::before {
            opacity: 1;
        }

        /* Particle canvas for each card */
        .project-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .project-card-enhanced:hover .project-particles {
            opacity: 1;
        }

        .project-type {
            font-family: 'JetBrains Mono';
            font-size: 0.65rem;
            color: var(--secondary);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
            display: inline-block;
        }

        .project-card-enhanced h3 {
            font-size: 1.3rem;
            font-weight: 800;
            margin: 0 0 15px 0;
            color: var(--text-main);
            transition: color 0.3s ease;
        }

        .project-card-enhanced:hover h3 {
            color: var(--secondary);
        }

        .project-description {
            color: var(--text-dim);
            font-size: 0.9rem;
            line-height: 1.7;
            margin-bottom: 20px;
        }

        .project-tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .project-tech {
            font-family: 'JetBrains Mono';
            font-size: 0.6rem;
            padding: 5px 10px;
            background: rgba(10, 37, 64, 0.1);
            border: 1px solid rgba(10, 37, 64, 0.3);
            color: var(--secondary);
            transition: all 0.3s ease;
        }

        .project-tech:hover {
            background: var(--secondary);
            color: var(--bg);
        }

        .project-metric {
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'JetBrains Mono';
            font-size: 0.75rem;
            color: var(--secondary);
            margin-bottom: 20px;
            padding: 10px 15px;
            background: rgba(0, 180, 216, 0.05);
            border-left: 2px solid var(--accent);
        }

        .project-metric i {
            color: var(--tertiary);
        }

        .project-links {
            display: flex;
            gap: 15px;
            margin-top: auto;
        }

        .project-link {
            font-family: 'JetBrains Mono';
            font-size: 0.75rem;
            color: var(--text-dim);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
            padding: 8px 15px;
            border: 1px solid var(--border);
        }

        .project-link:hover {
            color: var(--secondary);
            border-color: var(--secondary);
            box-shadow: 0 0 15px rgba(0, 180, 216, 0.2);
        }

        .project-link::before {
            content: '→';
            transition: transform 0.3s ease;
        }

        .project-link:hover::before {
            transform: translateX(3px);
        }

        /* Mobile responsiveness for projects */
        @media (max-width: 768px) {
            .projects-grid-enhanced {
                grid-template-columns: 1fr;
            }

            .project-card-enhanced {
                padding: 25px;
            }

            .projects-section {
                padding-top: 60px;
                padding-bottom: 60px;
            }
        }

        /* Contact Form */
        form { display: flex; flex-direction: column; gap: 10px; }
        input, textarea, button { padding: 10px; border: 1px solid var(--border); background: var(--glass-bg); color: var(--text-main); }
        button { background: var(--secondary); border: none; cursor: pointer; transition: background 0.3s, transform 0.2s; font-weight: 600; }
        button:hover { background: var(--tertiary); transform: translateY(-2px); }

        /* Scroll Progress Bar */
        .progress-wrap {
            position: fixed; right: 40px; top: 50%; transform: translateY(-50%);
            height: 200px; width: 2px; background: var(--border); z-index: 100;
        }
        .progress-bar { width: 100%; background: var(--secondary); height: 0%; }

        .right { justify-content: flex-end; text-align: right; }
        .center { justify-content: center; text-align: center; }

        /* About Me Enhanced Panel */
        .about-panel {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-left: 3px solid var(--secondary);
            padding: 40px;
            backdrop-filter: blur(20px);
            max-width: 550px;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.4s ease;
        }

        .about-panel:hover {
            transform: scale(1.03);
            box-shadow: 0 0 30px rgba(0, 180, 216, 0.15);
        }

        .about-header {
            display: flex;
            align-items: center;
            gap: 25px;
            margin-bottom: 25px;
        }

        .about-photo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 2px solid var(--secondary);
            background: linear-gradient(135deg, var(--glass-bg) 0%, rgba(0, 180, 216, 0.1) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .about-photo::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 40%, var(--accent) 100%);
            opacity: 0.1;
        }

        .about-photo-placeholder {
            font-family: 'JetBrains Mono';
            font-size: 2rem;
            color: var(--secondary);
            font-weight: 800;
        }

        .about-photo-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center top;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .about-photo:hover .about-photo-img {
            transform: scale(1.05);
        }

        .about-panel:hover .about-photo {
            box-shadow: 0 0 20px rgba(0, 180, 216, 0.4);
        }

        .about-header-text {
            text-align: left;
        }

        .about-header-text h2 {
            margin: 0 0 5px 0;
            font-size: clamp(1.2rem, 2.5vw, 1.5rem);
        }

        .about-location {
            font-family: 'JetBrains Mono';
            font-size: 0.75rem;
            color: var(--text-dim);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .about-location i {
            color: var(--secondary);
        }

        .about-bio {
            color: var(--text-dim);
            line-height: 1.7;
            font-size: 0.95rem;
            margin-bottom: 20px;
            text-align: left;
        }

        .about-bio .highlight {
            color: var(--secondary);
        }
        
        /* DevOps Metrics Dashboard */
        .devops-metrics {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 25px 0;
        }
        
        .metric-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px 15px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--accent), var(--secondary));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease;
        }
        
        .metric-card:hover::before {
            transform: scaleX(1);
        }
        
        .metric-card:hover {
            border-color: var(--secondary);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 180, 216, 0.15);
        }
        
        .metric-icon {
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 10px;
        }
        
        .metric-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 5px;
        }
        
        .metric-value::after {
            content: '+';
            font-size: 1rem;
            color: var(--accent);
        }
        
        .metric-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        @media (max-width: 768px) {
            .devops-metrics {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .devops-metrics {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
            
            .metric-card {
                padding: 15px 10px;
            }
            
            .metric-value {
                font-size: 1.4rem;
            }
        }

        .about-education {
            background: rgba(0, 180, 216, 0.05);
            border: 1px solid var(--border);
            padding: 15px;
            margin: 20px 0;
            text-align: left;
        }

        .about-education-label {
            font-family: 'JetBrains Mono';
            font-size: 0.65rem;
            color: var(--secondary);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .about-education-label i {
            color: var(--secondary);
        }

        .about-education-degree {
            font-weight: 800;
            font-size: 0.95rem;
            margin-bottom: 3px;
        }

        .about-education-school {
            color: var(--text-dim);
            font-size: 0.85rem;
        }

        .about-education-cgpa {
            font-family: 'JetBrains Mono';
            color: var(--secondary);
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .soft-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .soft-skill {
            font-family: 'JetBrains Mono';
            font-size: 0.7rem;
            padding: 8px 15px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-dim);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .soft-skill i {
            color: var(--secondary);
            font-size: 0.6rem;
        }

        .soft-skill::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            transition: left 0.5s ease;
            opacity: 0.2;
        }

        .soft-skill:hover {
            border-color: var(--secondary);
            color: var(--secondary);
        }

        .soft-skill:hover::before {
            left: 100%;
        }

        /* About Contact Info */
        .about-contact-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 180, 216, 0.05);
            border: 1px solid var(--border);
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'JetBrains Mono';
            font-size: 0.75rem;
            color: var(--text-dim);
        }

        .contact-item i {
            color: var(--secondary);
            width: 16px;
            text-align: center;
        }

        .contact-item a {
            color: var(--text-dim);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .contact-item a:hover {
            color: var(--secondary);
        }

        /* Languages Section */
        .languages-section {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 50vh;
            padding: 80px 10%;
        }

        .languages-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
        }

        .language-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: var(--glass-bg);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .language-item:hover {
            border-color: var(--secondary);
            transform: translateX(5px);
        }

        .language-name {
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .language-level {
            font-family: 'JetBrains Mono';
            font-size: 0.7rem;
            color: var(--text-dim);
        }

        /* Resume Section */
        .resume-section {
            flex-direction: column;
            align-items: center;
            padding-top: 100px;
            padding-bottom: 100px;
        }

        .resume-container {
            width: 100%;
            max-width: 900px;
        }

        .resume-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .resume-header h2 {
            font-size: clamp(1.5rem, 3vw, 2.5rem);
            margin: 10px 0;
        }

        .resume-header p {
            color: var(--text-dim);
            max-width: 600px;
            margin: 0 auto;
        }

        .resume-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .resume-preview {
            width: 100%;
            height: 500px;
            background: var(--glass-bg);
            border: 1px solid var(--border);
            overflow: hidden;
        }

        .resume-preview iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .resume-actions {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .cta-button {
            font-family: 'JetBrains Mono';
            font-size: 0.8rem;
            padding: 15px 30px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .resume-download {
            background: var(--secondary);
            color: var(--bg);
            border: 2px solid var(--secondary);
        }

        .resume-download:hover {
            background: transparent;
            color: var(--secondary);
            box-shadow: 0 0 20px var(--glow);
        }

        .resume-view {
            background: transparent;
            color: var(--secondary);
            border: 2px solid var(--secondary);
        }

        .resume-view:hover {
            background: var(--secondary);
            color: var(--bg);
        }

        /* Contact Link Items */
        .contact-link-item {
            font-family: 'JetBrains Mono';
            font-size: 0.75rem;
            color: var(--text-dim);
            text-decoration: none;
            padding: 10px 15px;
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .contact-link-item:hover {
            color: var(--secondary);
            border-color: var(--secondary);
            box-shadow: 0 0 15px var(--glow);
        }

        .contact-link-item i {
            color: var(--secondary);
        }

        /* Mobile Responsiveness for new sections */
        @media (max-width: 768px) {
            .languages-section {
                padding: 60px 5%;
            }

            .resume-section {
                padding: 60px 5%;
            }

            .resume-preview {
                height: 350px;
            }

            .resume-actions {
                flex-direction: column;
                width: 100%;
            }

            .cta-button {
                justify-content: center;
                width: 100%;
            }

            .about-contact-info {
                padding: 12px;
            }

            .contact-item {
                font-size: 0.7rem;
            }

            .contact-links {
                flex-direction: column;
                align-items: center;
            }

            .contact-link-item {
                width: 100%;
                justify-content: center;
            }
        }

        /* Experience Timeline */
        .timeline-section {
            flex-direction: column;
            align-items: flex-start;
            padding-top: 100px;
            padding-bottom: 100px;
        }

        .timeline-header {
            margin-bottom: 60px;
        }

        .timeline-header h2 {
            font-size: clamp(1.5rem, 3vw, 2.5rem);
            margin: 10px 0;
        }

        .timeline-container {
            position: relative;
            width: 100%;
            max-width: 900px;
        }

        /* The vertical line */
        .timeline-line {
            position: absolute;
            left: 150px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, var(--secondary), var(--accent));
        }

        .timeline-item {
            position: relative;
            display: flex;
            margin-bottom: 50px;
            opacity: 0;
        }

        .timeline-item:last-child {
            margin-bottom: 0;
        }

        /* Date on the left */
        .timeline-date {
            width: 120px;
            flex-shrink: 0;
            text-align: right;
            padding-right: 30px;
            font-family: 'JetBrains Mono';
            font-size: 0.75rem;
            color: var(--secondary);
            line-height: 1.6;
        }

        .timeline-date .duration {
            display: block;
            color: var(--text-dim);
            font-size: 0.65rem;
            margin-top: 3px;
        }

        /* The dot */
        .timeline-dot {
            position: absolute;
            left: 143px;
            top: 5px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--bg);
            border: 3px solid var(--secondary);
            z-index: 2;
            transition: all 0.3s ease;
        }

        .timeline-item:hover .timeline-dot {
            background: var(--secondary);
            box-shadow: 0 0 20px var(--secondary);
            transform: scale(1.2);
        }

        .timeline-item.current .timeline-dot {
            background: var(--secondary);
            box-shadow: 0 0 15px var(--secondary);
            animation: pulse-dot 2s infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { box-shadow: 0 0 15px var(--secondary); }
            50% { box-shadow: 0 0 25px var(--secondary), 0 0 40px var(--secondary); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Content on the right */
        .timeline-content {
            flex: 1;
            margin-left: 50px;
            background: var(--glass-bg);
            border: 1px solid var(--border);
            border-left: 3px solid var(--secondary);
            padding: 25px 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .timeline-item:hover .timeline-content {
            border-left-color: var(--secondary);
            box-shadow: 0 0 30px rgba(10, 37, 64, 0.15);
            transform: translateX(5px);
        }

        .timeline-role {
            font-weight: 800;
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: var(--text-main);
        }

        .timeline-company {
            font-family: 'JetBrains Mono';
            font-size: 0.8rem;
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timeline-company::before {
            content: '◆';
            font-size: 0.6rem;
        }

        .timeline-description {
            color: var(--text-dim);
            font-size: 0.9rem;
            line-height: 1.7;
            margin-bottom: 15px;
        }

        .timeline-tech {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .timeline-tech-tag {
            font-family: 'JetBrains Mono';
            font-size: 0.65rem;
            padding: 5px 12px;
            background: rgba(10, 37, 64, 0.1);
            border: 1px solid rgba(10, 37, 64, 0.3);
            color: var(--secondary);
            transition: all 0.3s ease;
        }

        .timeline-tech-tag:hover {
            background: var(--secondary);
            color: var(--bg);
        }

        /* Mobile Responsiveness for Timeline */
        @media (max-width: 768px) {
            .timeline-line {
                left: 20px;
            }

            .timeline-item {
                flex-direction: column;
                padding-left: 50px;
            }

            .timeline-date {
                width: auto;
                text-align: left;
                padding-right: 0;
                margin-bottom: 10px;
            }

            .timeline-dot {
                left: 13px;
            }

            .timeline-content {
                margin-left: 0;
            }
        }

        /* Mobile Responsiveness for About Section */
        @media (max-width: 768px) {
            .about-panel {
                max-width: 100%;
                padding: 25px;
            }

            .about-header {
                flex-direction: column;
                text-align: center;
            }

            .about-header-text {
                text-align: center;
            }

            .about-location {
                justify-content: center;
            }

            .about-bio,
            .about-education {
                text-align: center;
            }

            .soft-skills {
                justify-content: center;
            }

            .right {
                justify-content: center;
                text-align: center;
            }

            section {
                padding: 0 5%;
            }
        }

        /* ======================================
           COMPREHENSIVE MOBILE RESPONSIVENESS
           ====================================== */
        
        /* Small Mobile Devices (320px - 480px) */
        @media (max-width: 480px) {
            html {
                font-size: 14px;
            }
            
            /* Hero Section */
            .hero-title {
                font-size: clamp(2.5rem, 15vw, 4rem);
                line-height: 0.9;
            }
            
            .hero-subtitle {
                font-size: 0.7rem;
                letter-spacing: 1px;
            }
            
            .hero-position {
                gap: 8px;
            }
            
            .position-badge {
                padding: 8px 14px;
                font-size: 0.8rem;
            }
            
            .position-badge i {
                font-size: 1rem;
            }
            
            .hero-bio {
                font-size: 0.85rem;
                line-height: 1.6;
                margin-top: 20px;
            }
            
            .hero-tags {
                gap: 6px;
            }
            
            .hero-tag {
                font-size: 0.6rem;
                padding: 6px 10px;
            }
            
            /* Navigation */
            .side-nav {
                display: none;
            }
            
            .theme-toggle {
                top: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
            }
            
            /* About Section */
            .about-photo {
                width: 80px;
                height: 80px;
            }
            
            .about-header-text h2 {
                font-size: 1.2rem;
            }
            
            .devops-metrics {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .metric-card {
                padding: 12px;
            }
            
            .metric-value {
                font-size: 1.5rem;
            }
            
            .metric-label {
                font-size: 0.6rem;
            }
            
            /* Skills Section */
            .skills-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .skill-card {
                padding: 12px;
            }
            
            .skill-name {
                font-size: 0.65rem;
            }
            
            /* Projects Section */
            .project-card {
                padding: 20px;
            }
            
            .project-title {
                font-size: 1rem;
            }
            
            /* Contact Section */
            .contact-links {
                gap: 10px !important;
            }
            
            .contact-link-item {
                font-size: 0.75rem;
                padding: 8px 12px;
            }
            
            /* Footer */
            footer {
                padding: 40px 15px;
            }
            
            .footer-social {
                gap: 15px;
            }
            
            .footer-social a {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
        }
        
        /* Medium Mobile Devices (481px - 768px) */
        @media (max-width: 768px) and (min-width: 481px) {
            .hero-title {
                font-size: clamp(3rem, 12vw, 6rem);
            }
            
            .position-badge {
                padding: 10px 18px;
                font-size: 0.9rem;
            }
            
            .devops-metrics {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .skills-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* Architecture View Mobile */
        @media (max-width: 768px) {
            .architecture-modal-header {
                padding: 12px 15px;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .architecture-modal-title {
                font-size: 0.9rem;
                flex: 1 1 100%;
                justify-content: center;
            }
            
            .architecture-modal-close {
                padding: 8px 14px;
                font-size: 0.75rem;
                position: absolute;
                top: 10px;
                right: 10px;
            }
            
            .architecture-modal-controls {
                bottom: 15px;
                padding: 8px 12px;
                gap: 8px;
                border-radius: 30px;
            }
            
            .architecture-control-btn {
                width: 36px;
                height: 36px;
                font-size: 0.85rem;
            }
            
            .architecture-modal-hint {
                bottom: 70px;
                font-size: 0.65rem;
                padding: 0 20px;
            }
            
            .view-architecture-btn {
                bottom: 15px;
                right: 15px;
                padding: 10px 14px;
                font-size: 0.7rem;
                border-radius: 30px;
            }
            
            .view-architecture-btn span {
                display: none;
            }
            
            .view-architecture-btn i {
                font-size: 1.2rem;
            }
        }
        
        /* Touch-friendly adjustments */
        @media (hover: none) and (pointer: coarse) {
            .architecture-control-btn {
                min-width: 44px;
                min-height: 44px;
            }
            
            .view-architecture-btn {
                min-width: 50px;
                min-height: 50px;
            }
            
            .architecture-modal-hint {
                display: block;
            }
            
            /* Disable hover effects that don't work on touch */
            .hero-tag:hover,
            .skill-card:hover,
            .project-card:hover {
                transform: none;
            }
        }
        
        /* Landscape Mobile */
        @media (max-height: 500px) and (orientation: landscape) {
            .hero-content {
                padding-top: 60px;
            }
            
            .hero-title {
                font-size: clamp(2rem, 10vh, 3rem);
            }
            
            .hero-position {
                flex-direction: row;
            }
            
            .position-divider {
                display: block;
            }
            
            .architecture-modal-controls {
                bottom: 10px;
            }
            
            .architecture-modal-hint {
                display: none;
            }
        }
        
        /* Extra Small Screens */
        @media (max-width: 320px) {
            .hero-title {
                font-size: 2.2rem;
            }
            
            .position-badge {
                padding: 6px 12px;
                font-size: 0.7rem;
            }
            
            .devops-metrics {
                grid-template-columns: 1fr;
            }
            
            .skills-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        footer { 
            padding: 60px 20px; 
            text-align: center; 
            font-family: 'JetBrains Mono'; 
            color: var(--text-dim);
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(0, 180, 216, 0.2);
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .footer-social {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .footer-social a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(0, 180, 216, 0.1);
            border: 1px solid rgba(0, 180, 216, 0.3);
            color: var(--secondary);
            font-size: 1.3rem;
            transition: all 0.3s ease;
        }
        
        .footer-social a:hover {
            background: var(--secondary);
            color: var(--bg);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 180, 216, 0.3);
        }
        
        .footer-terminal {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 180, 216, 0.2);
            border-radius: 8px;
            padding: 15px 25px;
            margin-bottom: 25px;
            display: inline-block;
        }
        
        .terminal-prompt {
            color: var(--accent);
            margin-right: 10px;
        }
        
        .terminal-text {
            color: var(--text-dim);
        }
        
        .footer-copy {
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .footer-status {
            font-size: 0.8rem;
            color: var(--text-dim);
            opacity: 0.7;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            background: var(--accent);
            border-radius: 50%;
            animation: statusPulse 2s infinite;
        }
        
        @keyframes statusPulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 5px var(--accent); }
            50% { opacity: 0.5; box-shadow: 0 0 15px var(--accent); }
        }

        /* Accessibility: Skip Link */
        .skip-link {
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent);
            color: var(--bg);
            padding: 15px 25px;
            font-family: 'JetBrains Mono';
            font-size: 0.9rem;
            text-decoration: none;
            z-index: 1000;
            transition: top 0.3s ease;
        }

        .skip-link:focus {
            top: 10px;
        }

        /* Accessibility: Focus Styles */
        *:focus {
            outline: 2px solid var(--secondary);
            outline-offset: 3px;
        }

        *:focus:not(:focus-visible) {
            outline: none;
        }

        *:focus-visible {
            outline: 2px solid var(--secondary);
            outline-offset: 3px;
        }

        /* Timeline keyboard navigation */
        .timeline-item[tabindex]:focus {
            outline: none;
        }

        .timeline-item[tabindex]:focus .timeline-content {
            border-left-color: var(--secondary);
            box-shadow: 0 0 30px rgba(0, 180, 216, 0.2);
        }

        .timeline-item[tabindex]:focus .timeline-dot {
            background: var(--accent);
            box-shadow: 0 0 20px var(--accent);
            transform: scale(1.3);
        }

        /* Visually hidden but accessible to screen readers */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Reduce motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Custom Cursor */
        .custom-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--secondary);
            opacity: 0.6;
            pointer-events: none;
            z-index: 10000;
            transform: translate(-50%, -50%);
            transition: width 0.2s ease, height 0.2s ease, opacity 0.2s ease, background 0.2s ease;
            mix-blend-mode: difference;
        }

        .custom-cursor.cursor-hover {
            width: 50px;
            height: 50px;
            opacity: 0.4;
            background: var(--tertiary);
        }

        .custom-cursor.cursor-click {
            transform: translate(-50%, -50%) scale(0.8);
        }

        .custom-cursor-dot {
            position: fixed;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--text-main);
            pointer-events: none;
            z-index: 10001;
            transform: translate(-50%, -50%);
        }

        /* Hide custom cursor on touch devices */
        @media (hover: none) and (pointer: coarse) {
            .custom-cursor,
            .custom-cursor-dot {
                display: none !important;
            }
        }

        /* Hide default cursor when custom cursor is active */
        @media (hover: hover) and (pointer: fine) {
            body {
                cursor: none;
            }
            
            a, button, .glass-panel, .timeline-item, .project-card, .skill-category, 
            .cert-card, .mode-toggle, input, textarea, .cta-button {
                cursor: none;
            }
        }
    </style>
</head>
<body>

    <!-- Custom Cursor Elements -->
    <div class="custom-cursor" aria-hidden="true"></div>
    <div class="custom-cursor-dot" aria-hidden="true"></div>

    <!-- Skip Link for Keyboard Users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Social Links Bar (Left Side) -->
    <div class="social-bar" aria-label="Social links">
        <a href="https://www.linkedin.com/in/mr-ahmad-shakeel" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="LinkedIn Profile">
            <i class="fab fa-linkedin-in"></i>
        </a>
        <a href="https://github.com/mr-ahmadshakeel" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="GitHub Profile">
            <i class="fab fa-github"></i>
        </a>
        <a href="mailto:mr.ahmadshakeel29@gmail.com" class="social-link" aria-label="Send Email">
            <i class="fas fa-envelope"></i>
        </a>
        <a href="tel:+923238472027" class="social-link" aria-label="Phone Call">
            <i class="fas fa-phone"></i>
        </a>
    </div>

    <!-- Sticky Side Navigation -->
    <nav class="side-nav" role="navigation" aria-label="Section navigation" id="sideNav">
        <a href="#hero" class="side-nav-link active" data-tooltip="Home" aria-label="Go to Home">
            <i class="fas fa-home"></i>
        </a>
        <a href="#about" class="side-nav-link" data-tooltip="About" aria-label="Go to About">
            <i class="fas fa-user"></i>
        </a>
        <a href="#skills" class="side-nav-link" data-tooltip="DevOps Arsenal" aria-label="Go to Skills">
            <i class="fas fa-tools"></i>
        </a>
        <a href="#experience" class="side-nav-link" data-tooltip="Experience" aria-label="Go to Experience">
            <i class="fas fa-briefcase"></i>
        </a>
        <a href="#projects" class="side-nav-link" data-tooltip="Deployments" aria-label="Go to Projects">
            <i class="fas fa-rocket"></i>
        </a>
        <a href="#education" class="side-nav-link" data-tooltip="Education" aria-label="Go to Education">
            <i class="fas fa-graduation-cap"></i>
        </a>
        <a href="#contact" class="side-nav-link" data-tooltip="Contact" aria-label="Go to Contact">
            <i class="fas fa-envelope"></i>
        </a>
    </nav>
    
    <!-- Mobile Nav Toggle -->
    <button class="side-nav-toggle" id="sideNavToggle" aria-label="Toggle navigation menu" aria-expanded="false">
        <i class="fas fa-bars"></i>
    </button>

    <nav class="nav" role="navigation" aria-label="Main navigation">
        <div aria-hidden="true"><i class="fas fa-terminal" style="margin-right: 8px; color: var(--secondary);"></i>Ahmad Shakeel</div>
        <div role="status" aria-live="polite"><i class="fas fa-circle" style="color: var(--tertiary); font-size: 0.5rem; margin-right: 6px; animation: pulse 2s infinite;"></i>Available for Hire</div>
        <button class="mode-toggle" onclick="toggleMode()" aria-label="Toggle dark/light mode" type="button">
            <span class="mode-toggle-icon" aria-hidden="true">🌙</span>
            <span class="mode-toggle-text">Dark</span>
        </button>
    </nav>

    <div class="progress-wrap"><div class="progress-bar"></div></div>

    <canvas id="webgl"></canvas>
    
    <!-- 3D Element Tooltip -->
    <div class="tooltip-3d" id="tooltip3d">
        <div class="tooltip-3d-content">
            <div class="tooltip-3d-header">
                <div class="tooltip-3d-icon" id="tooltipIcon"><i class="fab fa-aws"></i></div>
                <div>
                    <div class="tooltip-3d-title" id="tooltipTitle">EKS Master Node</div>
                    <div class="tooltip-3d-type" id="tooltipType">Kubernetes Control Plane</div>
                </div>
            </div>
            <div class="tooltip-3d-desc" id="tooltipDesc">Central orchestration node managing workload scheduling and cluster state.</div>
            <div class="tooltip-3d-stats" id="tooltipStats">
                <div class="tooltip-3d-stat"><i class="fas fa-circle"></i> <span>Running</span></div>
                <div class="tooltip-3d-stat"><i class="fas fa-cubes"></i> <span>15 Pods</span></div>
            </div>
            <div class="tooltip-3d-pointer"></div>
        </div>
    </div>
    
    <!-- 3D Infrastructure Legend -->
    <div class="legend-3d" id="legend3d">
        <button class="legend-3d-toggle" id="legendToggle" aria-label="Toggle legend">
            <i class="fas fa-chevron-down"></i>
        </button>
        <div class="legend-3d-title"><i class="fas fa-layer-group"></i> Infrastructure Map</div>
        <div class="legend-3d-items">
            <div class="legend-3d-item" data-highlight="master">
                <div class="legend-3d-color k8s"></div>
                <span>EKS Master (Control Plane)</span>
            </div>
            <div class="legend-3d-item" data-highlight="ec2">
                <div class="legend-3d-color ec2"></div>
                <span>EC2 Worker Nodes</span>
            </div>
            <div class="legend-3d-item" data-highlight="docker">
                <div class="legend-3d-color docker"></div>
                <span>Docker Containers</span>
            </div>
            <div class="legend-3d-item" data-highlight="lambda">
                <div class="legend-3d-color lambda"></div>
                <span>AWS Lambda Functions</span>
            </div>
            <div class="legend-3d-item" data-highlight="terraform">
                <div class="legend-3d-color terraform"></div>
                <span>Terraform Modules</span>
            </div>
            <div class="legend-3d-item" data-highlight="helm">
                <div class="legend-3d-color helm"></div>
                <span>Helm Charts</span>
            </div>
            <div class="legend-3d-item" data-highlight="cicd">
                <div class="legend-3d-color cicd"></div>
                <span>CI/CD Pipeline</span>
            </div>
            <div class="legend-3d-item" data-highlight="traffic">
                <div class="legend-3d-color traffic"></div>
                <span>Service Mesh Traffic</span>
            </div>
        </div>
    </div>
    
    <!-- Full Architecture View Button -->
    <button class="view-architecture-btn" id="viewArchitectureBtn" aria-label="View full architecture">
        <i class="fas fa-expand"></i>
        <span>View Full Architecture</span>
    </button>
    
    <!-- Full Architecture Modal -->
    <div class="architecture-modal" id="architectureModal">
        <div class="architecture-modal-header">
            <div class="architecture-modal-title">
                <i class="fas fa-cubes"></i>
                <span>DevOps Infrastructure Architecture</span>
            </div>
            <button class="architecture-modal-close" id="closeArchitectureBtn">
                <i class="fas fa-times"></i>
                <span>Exit View</span>
            </button>
        </div>
        <canvas id="architectureCanvas"></canvas>
        <div class="architecture-modal-hint desktop-hint">
            <i class="fas fa-mouse-pointer"></i> Drag to rotate • Scroll to zoom • Right-click to pan
        </div>
        <div class="architecture-modal-hint mobile-hint">
            <i class="fas fa-hand-pointer"></i> Drag to rotate • Pinch to zoom • Two fingers to pan
        </div>
        <div class="architecture-modal-controls">
            <button class="architecture-control-btn" id="zoomInBtn" title="Zoom In">
                <i class="fas fa-plus"></i>
            </button>
            <button class="architecture-control-btn" id="zoomOutBtn" title="Zoom Out">
                <i class="fas fa-minus"></i>
            </button>
            <div class="architecture-control-divider"></div>
            <button class="architecture-control-btn" id="resetViewBtn" title="Reset View">
                <i class="fas fa-sync-alt"></i>
            </button>
            <button class="architecture-control-btn" id="autoRotateBtn" title="Auto Rotate">
                <i class="fas fa-redo"></i>
            </button>
        </div>
    </div>

    <div class="content" id="main-content" role="main">
        <section id="hero" aria-labelledby="hero-title" class="blueprint-bg">
            <div class="hero-content">
                <span class="hero-subtitle" role="doc-subtitle"><i class="fas fa-terminal"></i> // Welcome to my portfolio</span>
                <h1 class="hero-title" id="hero-title">AHMAD<br><span class="accent">SHAKEEL</span></h1>
                <div class="hero-position">
                    <span class="position-badge"><i class="fas fa-cloud"></i> DevOps Engineer</span>
                    <span class="position-divider">|</span>
                    <span class="position-badge"><i class="fas fa-code"></i> Software Developer</span>
                </div>
                <p class="hero-bio">
                    DevOps Engineer bridging <span class="highlight">cloud automation</span> and <span class="highlight">seamless deployments</span> 
                    for scalable systems. Architecting resilient infrastructure with 
                    <span class="terminal-text">AWS</span>, <span class="terminal-text">Docker</span>, and <span class="terminal-text">Kubernetes</span>. 
                    Building CI/CD pipelines that deploy with confidence, containerizing applications for consistent environments, 
                    and orchestrating workloads that scale automatically. Focused on <span class="highlight">operational excellence</span>, 
                    <span class="highlight">infrastructure as code</span>, and empowering teams to ship faster.
                </p>
                <div class="hero-tags">
                    <span class="hero-tag"><i class="fab fa-aws"></i> AWS (EC2, ECS, EKS, Lambda)</span>
                    <span class="hero-tag"><i class="fab fa-docker"></i> Docker</span>
                    <span class="hero-tag"><i class="fas fa-dharmachakra"></i> Kubernetes</span>
                    <span class="hero-tag"><i class="fas fa-cube"></i> Terraform</span>
                    <span class="hero-tag"><i class="fab fa-github"></i> GitHub Actions</span>
                    <span class="hero-tag"><i class="fab fa-microsoft"></i> Azure DevOps</span>
                    <span class="hero-tag"><i class="fas fa-mobile-alt"></i> Flutter</span>
                    <span class="hero-tag"><i class="fas fa-fire"></i> Firebase</span>
                </div>
                <div class="scroll-indicator">
                    <span class="scroll-text"><i class="fas fa-arrow-down"></i> Scroll to explore deployments</span>
                </div>
            </div>
        </section>

        <section class="right" id="about" aria-labelledby="about-title">
            <div class="about-panel">
                <span class="sub-title" id="about-label"><i class="fas fa-user"></i> 01. ABOUT ME</span>
                
                <div class="about-header">
                    <div class="about-photo" role="img" aria-label="Ahmad Shakeel profile photo">
                        <img src="profile.jpg" alt="Ahmad Shakeel" class="about-photo-img">
                    </div>
                    <div class="about-header-text">
                        <h2 id="about-title">AHMAD SHAKEEL</h2>
                        <span class="about-location" aria-label="Location: Lahore 54810, Pakistan"><i class="fas fa-map-marker-alt"></i> Lahore 54810, Pakistan</span>
                    </div>
                </div>

                <p class="about-bio">
                    Passionate DevOps engineer with a drive for <span class="highlight">bridging development and operations</span> 
                    to create seamless, efficient deployment pipelines. Focused on 
                    <span class="highlight">efficiency</span>, <span class="highlight">innovation</span>, and building 
                    infrastructure that scales. I thrive on automating complex workflows and 
                    delivering reliable systems that empower development teams.
                </p>
                
                <div class="devops-metrics">
                    <div class="metric-card">
                        <div class="metric-icon"><i class="fas fa-rocket"></i></div>
                        <div class="metric-value" data-value="500">0</div>
                        <div class="metric-label">Deployments</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon"><i class="fas fa-server"></i></div>
                        <div class="metric-value" data-value="50">0</div>
                        <div class="metric-label">Servers Managed</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon"><i class="fab fa-docker"></i></div>
                        <div class="metric-value" data-value="100">0</div>
                        <div class="metric-label">Containers</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon"><i class="fas fa-code-branch"></i></div>
                        <div class="metric-value" data-value="25">0</div>
                        <div class="metric-label">CI/CD Pipelines</div>
                    </div>
                </div>

                <div class="about-contact-info">
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <a href="tel:+923238472027">+92 323 8472027</a>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <a href="mailto:mr.ahmadshakeel29@gmail.com">mr.ahmadshakeel29@gmail.com</a>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-globe"></i>
                        <a href="https://mr-ahmadshakeel.online/" target="_blank" rel="noopener noreferrer">mr-ahmadshakeel.online</a>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-linkedin"></i>
                        <a href="https://www.linkedin.com/in/mr-ahmad-shakeel" target="_blank" rel="noopener noreferrer">linkedin.com/in/mr-ahmad-shakeel</a>
                    </div>
                </div>

                <div class="about-education">
                    <div class="about-education-label"><i class="fas fa-graduation-cap"></i> Education</div>
                    <div class="about-education-degree">Bachelor's in Software Engineering</div>
                    <div class="about-education-school">University of Central Punjab</div>
                    <div class="about-education-cgpa">CGPA: 3.73 / 4.00</div>
                </div>

                <div class="soft-skills">
                    <span class="soft-skill"><i class="fas fa-check"></i> Team Player</span>
                    <span class="soft-skill"><i class="fas fa-check"></i> Quick Learner</span>
                    <span class="soft-skill"><i class="fas fa-check"></i> Problem Solver</span>
                    <span class="soft-skill"><i class="fas fa-check"></i> Adaptable</span>
                    <span class="soft-skill"><i class="fas fa-check"></i> Detail-Oriented</span>
                    <span class="soft-skill"><i class="fas fa-check"></i> Communicator</span>
                </div>
            </div>
        </section>

        <section id="skills" aria-labelledby="skills-title" class="blueprint-bg">
            <div class="glass-panel skills-section">
                <span class="sub-title"><i class="fas fa-tools"></i> 02. SKILLS</span>
                <h2 id="skills-title">DEVOPS ARSENAL</h2>
                <p>Infrastructure automation toolkit powering enterprise-grade deployments and cloud-native applications.</p>

                <div class="skills-category">
                    <div class="skills-category-header">
                        <span class="skills-category-icon"><i class="fas fa-cloud"></i></span>
                        <span class="skills-category-title">DevOps & Cloud</span>
                    </div>
                    <div class="skills-grid-enhanced">
                        <div class="skill-item highlight"><i class="fab fa-aws"></i> AWS EC2</div>
                        <div class="skill-item highlight"><i class="fab fa-aws"></i> AWS Lambda</div>
                        <div class="skill-item highlight"><i class="fab fa-aws"></i> ECS Fargate</div>
                        <div class="skill-item highlight"><i class="fab fa-aws"></i> AWS ECR</div>
                        <div class="skill-item highlight"><i class="fab fa-aws"></i> AWS EKS</div>
                        <div class="skill-item"><i class="fab fa-aws"></i> VPCs & Subnets</div>
                        <div class="skill-item"><i class="fab fa-aws"></i> NAT Gateways</div>
                        <div class="skill-item"><i class="fas fa-shield-alt"></i> Security Groups</div>
                        <div class="skill-item highlight"><i class="fab fa-docker"></i> Docker</div>
                        <div class="skill-item highlight"><i class="fas fa-dharmachakra"></i> Kubernetes</div>
                        <div class="skill-item"><i class="fas fa-dharmachakra"></i> Minikube</div>
                        <div class="skill-item"><i class="fas fa-anchor"></i> Helm</div>
                        <div class="skill-item highlight"><i class="fab fa-github"></i> GitHub Actions</div>
                        <div class="skill-item"><i class="fas fa-code-branch"></i> CI/CD Pipelines</div>
                        <div class="skill-item"><i class="fas fa-boxes"></i> Containerization</div>
                        <div class="skill-item"><i class="fas fa-network-wired"></i> Cloud Infrastructure</div>
                    </div>
                </div>

                <div class="skills-category">
                    <div class="skills-category-header">
                        <span class="skills-category-icon"><i class="fas fa-code"></i></span>
                        <span class="skills-category-title">Programming & Development</span>
                    </div>
                    <div class="skills-grid-enhanced">
                        <div class="skill-item highlight">Dart (Advanced)</div>
                        <div class="skill-item highlight">C++ (Advanced)</div>
                        <div class="skill-item highlight">HTML/CSS (Advanced)</div>
                        <div class="skill-item">Java (Intermediate)</div>
                        <div class="skill-item">C (Beginner)</div>
                        <div class="skill-item">Python (Beginner)</div>
                        <div class="skill-item">PHP (Beginner)</div>
                        <div class="skill-item"><i class="fas fa-cubes"></i> OOP</div>
                        <div class="skill-item"><i class="fas fa-sitemap"></i> DSA</div>
                        <div class="skill-item"><i class="fas fa-drafting-compass"></i> Software Architecture</div>
                        <div class="skill-item"><i class="fas fa-tasks"></i> Agile Practices</div>
                    </div>
                </div>

                <div class="skills-category">
                    <div class="skills-category-header">
                        <span class="skills-category-icon"><i class="fas fa-mobile-alt"></i></span>
                        <span class="skills-category-title">Mobile & Web Development</span>
                    </div>
                    <div class="skills-grid-enhanced">
                        <div class="skill-item highlight"><i class="fas fa-mobile-alt"></i> Flutter (Android & iOS)</div>
                        <div class="skill-item highlight"><i class="fas fa-fire"></i> Firebase</div>
                        <div class="skill-item"><i class="fas fa-globe"></i> Flutter Web</div>
                        <div class="skill-item"><i class="fas fa-paint-brush"></i> UI/UX Design</div>
                        <div class="skill-item"><i class="fas fa-server"></i> Frontend Engineering</div>
                        <div class="skill-item"><i class="fas fa-database"></i> Backend Engineering</div>
                        <div class="skill-item"><i class="fas fa-database"></i> SQL</div>
                        <div class="skill-item"><i class="fas fa-fire"></i> Firebase DB</div>
                    </div>
                </div>

                <div class="skills-category">
                    <div class="skills-category-header">
                        <span class="skills-category-icon"><i class="fas fa-robot"></i></span>
                        <span class="skills-category-title">Machine Learning</span>
                    </div>
                    <div class="skills-grid-enhanced">
                        <div class="skill-item"><i class="fab fa-python"></i> Python</div>
                        <div class="skill-item"><i class="fas fa-brain"></i> TensorFlow</div>
                        <div class="skill-item"><i class="fas fa-cogs"></i> Model Development</div>
                        <div class="skill-item"><i class="fas fa-chart-bar"></i> Data Preprocessing</div>
                    </div>
                </div>

                <div class="skills-category">
                    <div class="skills-category-header">
                        <span class="skills-category-icon"><i class="fas fa-wrench"></i></span>
                        <span class="skills-category-title">Tools & Platforms</span>
                    </div>
                    <div class="skills-grid-enhanced">
                        <div class="skill-item"><i class="fab fa-android"></i> Android Studio</div>
                        <div class="skill-item"><i class="fas fa-code"></i> VS Code</div>
                        <div class="skill-item"><i class="fas fa-coffee"></i> Eclipse</div>
                        <div class="skill-item"><i class="fas fa-project-diagram"></i> StarUML</div>
                        <div class="skill-item"><i class="fab fa-figma"></i> Figma</div>
                        <div class="skill-item highlight"><i class="fab fa-git-alt"></i> Git/GitHub</div>
                        <div class="skill-item"><i class="fab fa-docker"></i> Docker</div>
                        <div class="skill-item"><i class="fas fa-dharmachakra"></i> Kubernetes</div>
                        <div class="skill-item"><i class="fas fa-shield-alt"></i> OpenVPN</div>
                    </div>
                </div>

                <div class="skills-category">
                    <div class="skills-category-header">
                        <span class="skills-category-icon"><i class="fas fa-users"></i></span>
                        <span class="skills-category-title">Soft Skills</span>
                    </div>
                    <div class="skills-grid-enhanced">
                        <div class="skill-item"><i class="fas fa-check"></i> Organizational Skills</div>
                        <div class="skill-item"><i class="fas fa-check"></i> Time Management</div>
                        <div class="skill-item"><i class="fas fa-check"></i> Communication</div>
                        <div class="skill-item"><i class="fas fa-check"></i> Interpersonal Skills</div>
                        <div class="skill-item"><i class="fas fa-check"></i> Problem Solving</div>
                        <div class="skill-item"><i class="fas fa-check"></i> Analytical Thinking</div>
                        <div class="skill-item"><i class="fas fa-check"></i> Detail-Oriented</div>
                        <div class="skill-item"><i class="fas fa-check"></i> Quick Learner</div>
                        <div class="skill-item"><i class="fas fa-check"></i> Adaptable</div>
                    </div>
                </div>

            </div>
        </section>

        <section class="timeline-section" id="experience" aria-labelledby="experience-title">
            <div class="timeline-header">
                <span class="sub-title" style="color: var(--secondary);"><i class="fas fa-briefcase"></i> 03. EXPERIENCE</span>
                <h2 id="experience-title">PROFESSIONAL JOURNEY</h2>
            </div>

            <div class="timeline-container" role="list" aria-label="Work experience timeline">
                <div class="timeline-line" aria-hidden="true"></div>

                <article class="timeline-item current" role="listitem" tabindex="0" aria-label="DevOps Trainee at PITC, December 2025 to Present">
                    <div class="timeline-date" aria-hidden="true">
                        Dec 2025
                        <span class="duration">Present</span>
                    </div>
                    <div class="timeline-dot" aria-hidden="true"></div>
                    <div class="timeline-content">
                        <h3 class="timeline-role"><i class="fas fa-server"></i> DevOps Trainee</h3>
                        <div class="timeline-company">Power Information Technology Company (PITC)</div>
                        <p class="timeline-description">
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Implemented CI/CD pipelines for e-Ops (Power Sector Management Platform for all DISCOs of Pakistan) - ReactJS frontend, .NET backend on on-premise servers in Islamabad & Lahore.<br>
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Modernized legacy deployments, introduced Docker containerization, and contributed to orchestration and automation planning.<br>
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Ensured secure, reliable deployments across enterprise-scale systems.
                        </p>
                        <div class="timeline-tech" aria-label="Technologies used">
                            <span class="timeline-tech-tag">GitHub Actions</span>
                            <span class="timeline-tech-tag">Docker</span>
                            <span class="timeline-tech-tag">ReactJS</span>
                            <span class="timeline-tech-tag">.NET</span>
                            <span class="timeline-tech-tag">MySQL</span>
                            <span class="timeline-tech-tag">Linux</span>
                            <span class="timeline-tech-tag">On-prem Infra</span>
                        </div>
                    </div>
                </article>

                <article class="timeline-item" role="listitem" tabindex="0" aria-label="DevOps Intern at NETSOL Pakistan, August to September 2025">
                    <div class="timeline-date" aria-hidden="true">
                        Aug 2025
                        <span class="duration">Sep 2025</span>
                    </div>
                    <div class="timeline-dot" aria-hidden="true"></div>
                    <div class="timeline-content">
                        <h3 class="timeline-role"><i class="fab fa-aws"></i> DevOps Intern</h3>
                        <div class="timeline-company">NETSOL Pakistan</div>
                        <p class="timeline-description">
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Designed secure AWS VPC & subnets; automated deployments of Dockerized microservices on ECS Fargate.<br>
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Managed Docker images in ECR; automated CI/CD with GitHub Actions.<br>
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Orchestrated workloads with Kubernetes (Minikube & AWS EKS).
                        </p>
                        <div class="timeline-tech" aria-label="Technologies used">
                            <span class="timeline-tech-tag">AWS VPC</span>
                            <span class="timeline-tech-tag">ECS Fargate</span>
                            <span class="timeline-tech-tag">ECR</span>
                            <span class="timeline-tech-tag">GitHub Actions</span>
                            <span class="timeline-tech-tag">Kubernetes</span>
                            <span class="timeline-tech-tag">Minikube</span>
                            <span class="timeline-tech-tag">AWS EKS</span>
                        </div>
                    </div>
                </article>

                <article class="timeline-item" role="listitem" tabindex="0" aria-label="Software Development Intern at Synergy Elektrik, May to June 2025">
                    <div class="timeline-date" aria-hidden="true">
                        May 2025
                        <span class="duration">Jun 2025</span>
                    </div>
                    <div class="timeline-dot" aria-hidden="true"></div>
                    <div class="timeline-content">
                        <h3 class="timeline-role"><i class="fas fa-laptop-code"></i> Software Development Intern</h3>
                        <div class="timeline-company">Synergy Elektrik (Pvt.) Ltd.</div>
                        <p class="timeline-description">
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Contributed to the development of a custom application for transformer testing reports.<br>
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Assisted in creating data input forms, automating test parameter storage, and generating structured digital reports.<br>
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Strengthened skills in database handling, software logic, and technical data management.
                        </p>
                        <div class="timeline-tech" aria-label="Technologies used">
                            <span class="timeline-tech-tag">Software Development</span>
                            <span class="timeline-tech-tag">Database Design</span>
                            <span class="timeline-tech-tag">Technical Reporting</span>
                            <span class="timeline-tech-tag">Data Management</span>
                        </div>
                    </div>
                </article>

                <article class="timeline-item" role="listitem" tabindex="0" aria-label="Flutter and Software Management at TheHash.io, March to May 2025">
                    <div class="timeline-date" aria-hidden="true">
                        Mar 2025
                        <span class="duration">May 2025</span>
                    </div>
                    <div class="timeline-dot" aria-hidden="true"></div>
                    <div class="timeline-content">
                        <h3 class="timeline-role"><i class="fas fa-mobile-alt"></i> Flutter & Software Management</h3>
                        <div class="timeline-company">TheHash.io</div>
                        <p class="timeline-description">
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Built and maintained cross-platform Flutter apps with responsive UI/UX.<br>
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Managed version control, agile sprints, and release deployment.
                        </p>
                        <div class="timeline-tech" aria-label="Technologies used">
                            <span class="timeline-tech-tag">Flutter</span>
                            <span class="timeline-tech-tag">UI/UX</span>
                            <span class="timeline-tech-tag">Version Control</span>
                            <span class="timeline-tech-tag">Agile</span>
                            <span class="timeline-tech-tag">Release Management</span>
                        </div>
                    </div>
                </article>

                <article class="timeline-item" role="listitem" tabindex="0" aria-label="Flutter Developer Intern at Apprays, September to December 2024">
                    <div class="timeline-date" aria-hidden="true">
                        Sep 2024
                        <span class="duration">Dec 2024</span>
                    </div>
                    <div class="timeline-dot" aria-hidden="true"></div>
                    <div class="timeline-content">
                        <h3 class="timeline-role"><i class="fas fa-mobile-alt"></i> Flutter Developer Intern</h3>
                        <div class="timeline-company">Apprays</div>
                        <p class="timeline-description">
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Developed cross-platform mobile applications using Flutter.<br>
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Integrated Firebase for backend services, authentication, and real-time data management.<br>
                            <i class="fas fa-check" style="color: var(--secondary); margin-right: 5px;"></i>Enhanced UI/UX by implementing responsive and dynamic app interfaces.
                        </p>
                        <div class="timeline-tech" aria-label="Technologies used">
                            <span class="timeline-tech-tag">Flutter</span>
                            <span class="timeline-tech-tag">Firebase</span>
                            <span class="timeline-tech-tag">Dart</span>
                            <span class="timeline-tech-tag">UI/UX</span>
                            <span class="timeline-tech-tag">Mobile Dev</span>
                        </div>
                    </div>
                </article>

            </div>
        </section>

        <section class="projects-section blueprint-bg" id="projects" aria-labelledby="projects-title">
            <div class="projects-header">
                <span class="sub-title" style="color: var(--secondary);"><i class="fas fa-rocket"></i> 04. PROJECTS</span>
                <h2 id="projects-title">DEPLOYMENT SHOWCASES</h2>
                <p>Production-grade implementations demonstrating CI/CD automation, container orchestration, and scalable cloud architectures.</p>
            </div>

            <div class="projects-grid-enhanced">

                <!-- Course Projects Section Header -->
                <div class="project-section-divider" style="grid-column: 1 / -1; margin: 20px 0;">
                    <h3 style="font-family: 'JetBrains Mono'; font-size: 0.9rem; color: var(--secondary); text-transform: uppercase; letter-spacing: 2px;"><i class="fas fa-graduation-cap"></i> Course Projects</h3>
                </div>

                <div class="project-card-enhanced">
                    <canvas class="project-particles"></canvas>
                    <span class="project-type"><i class="fab fa-android"></i> Final Year Project</span>
                    <h3>Zarraat Mobile App</h3>
                    <p class="project-description">
                        Developed a cross-platform Flutter app for agriculture in Pakistan, featuring weather forecasts, crop market data, a buy/sell platform, and guidance on foreign crops. Integrated Firebase backend and a bilingual, accessible UI.
                    </p>
                    <div class="project-tech-stack">
                        <span class="project-tech">Flutter</span>
                        <span class="project-tech">Firebase</span>
                        <span class="project-tech">Weather API</span>
                        <span class="project-tech">Dart</span>
                        <span class="project-tech">Bilingual UI</span>
                    </div>
                    <div class="project-metric"><i class="fas fa-seedling"></i> Empowering farmers with data-driven decisions</div>
                </div>

                <div class="project-card-enhanced">
                    <canvas class="project-particles"></canvas>
                    <span class="project-type"><i class="fas fa-globe"></i> Portfolio</span>
                    <h3>Personal Portfolio Website</h3>
                    <p class="project-description">
                        Built a responsive Flutter Web portfolio to showcase skills and projects, ensuring cross-device compatibility and deploying via Firebase Hosting for fast and secure delivery.
                    </p>
                    <div class="project-tech-stack">
                        <span class="project-tech">Flutter Web</span>
                        <span class="project-tech">Firebase Hosting</span>
                        <span class="project-tech">Responsive Design</span>
                        <span class="project-tech">Dart</span>
                    </div>
                    <div class="project-metric"><i class="fas fa-rocket"></i> Fast & secure delivery via Firebase</div>
                </div>

                <div class="project-card-enhanced">
                    <canvas class="project-particles"></canvas>
                    <span class="project-type"><i class="fab fa-android"></i> Android Application</span>
                    <h3>Quran-e-Aziz</h3>
                    <p class="project-description">
                        Created a user-friendly Flutter app with bookmarking, surah/ayah search, and easy navigation, designed for accessibility and a wide user base.
                    </p>
                    <div class="project-tech-stack">
                        <span class="project-tech">Flutter</span>
                        <span class="project-tech">Dart</span>
                        <span class="project-tech">Local Storage</span>
                        <span class="project-tech">Accessibility</span>
                    </div>
                    <div class="project-metric"><i class="fas fa-users"></i> Designed for wide accessibility</div>
                </div>

                <!-- Experience Based Projects Section Header -->
                <div class="project-section-divider" style="grid-column: 1 / -1; margin: 40px 0 20px 0;">
                    <h3 style="font-family: 'JetBrains Mono'; font-size: 0.9rem; color: var(--secondary); text-transform: uppercase; letter-spacing: 2px;"><i class="fas fa-briefcase"></i> Experience Based Projects</h3>
                </div>

                <div class="project-card-enhanced">
                    <canvas class="project-particles"></canvas>
                    <span class="project-type"><i class="fas fa-server"></i> DevOps / CI/CD</span>
                    <h3>E-Ops - National Electric Utility Platform (PITC)</h3>
                    <p class="project-description">
                        Implemented CI/CD pipelines with GitHub Actions for ReactJS frontend and .NET backend on on-premise servers. Introduced Docker containerization, automated deployments, and contributed to orchestration planning for enterprise-scale operations across all DISCOs in Pakistan.
                    </p>
                    <div class="project-tech-stack">
                        <span class="project-tech">GitHub Actions</span>
                        <span class="project-tech">ReactJS</span>
                        <span class="project-tech">.NET</span>
                        <span class="project-tech">Docker</span>
                        <span class="project-tech">On-Prem</span>
                        <span class="project-tech">MySQL</span>
                    </div>
                    <div class="project-metric"><i class="fas fa-bolt"></i> Enterprise-scale for all DISCOs</div>
                </div>

                <div class="project-card-enhanced">
                    <canvas class="project-particles"></canvas>
                    <span class="project-type"><i class="fas fa-chart-line"></i> Web Development</span>
                    <h3>Telemetry Web Application (Softverx)</h3>
                    <p class="project-description">
                        Developed a Flutter web app with customer authentication and device dashboards using Swagger APIs. Displayed smart home devices by room/type, showing voltage, temperature, power usage, and statuses, with 24-hour trend visualization via Flutter SL graph.
                    </p>
                    <div class="project-tech-stack">
                        <span class="project-tech">Flutter Web</span>
                        <span class="project-tech">Swagger APIs</span>
                        <span class="project-tech">Charts</span>
                        <span class="project-tech">Real-time Data</span>
                        <span class="project-tech">Authentication</span>
                    </div>
                    <div class="project-metric"><i class="fas fa-chart-area"></i> 24-hour trend visualization</div>
                </div>

                <div class="project-card-enhanced">
                    <canvas class="project-particles"></canvas>
                    <span class="project-type"><i class="fab fa-aws"></i> Cloud Infrastructure</span>
                    <h3>DevOps Projects (NETSOL Internship)</h3>
                    <p class="project-description">
                        Designed AWS VPC/subnets, configured OpenVPN access, and deployed Dockerized microservices (frontend, backend, DB) with Docker Compose and Nginx. Automated ECS deployments with GitHub Actions, managed ECR images, and orchestrated workloads with Kubernetes (Minikube & AWS EKS).
                    </p>
                    <div class="project-tech-stack">
                        <span class="project-tech">AWS VPC</span>
                        <span class="project-tech">EKS</span>
                        <span class="project-tech">Docker Compose</span>
                        <span class="project-tech">Nginx</span>
                        <span class="project-tech">Microservices</span>
                    </div>
                    <div class="project-metric"><i class="fas fa-network-wired"></i> Enterprise-grade cloud infrastructure</div>
                </div>

                <div class="project-card-enhanced">
                    <canvas class="project-particles"></canvas>
                    <span class="project-type"><i class="fas fa-terminal"></i> Automation Tool</span>
                    <h3>Secure AWS EC2 CLI Automation (NETSOL)</h3>
                    <p class="project-description">
                        Built Python CLI tool with bcrypt authentication, EC2 automation via tags, SSH access, and centralized S3 logging. Ensured compliance and traceability, using Boto3, AWS CLI, and GitHub for version control.
                    </p>
                    <div class="project-tech-stack">
                        <span class="project-tech">Python</span>
                        <span class="project-tech">Boto3</span>
                        <span class="project-tech">AWS EC2</span>
                        <span class="project-tech">S3 Logging</span>
                        <span class="project-tech">bcrypt</span>
                    </div>
                    <div class="project-metric"><i class="fas fa-shield-alt"></i> Secure & compliant automation</div>
                </div>

                <div class="project-card-enhanced">
                    <canvas class="project-particles"></canvas>
                    <span class="project-type"><i class="fab fa-react"></i> Web Development</span>
                    <h3>MTR Company Website</h3>
                    <p class="project-description">
                        Developed a responsive corporate site using React (Vite) and TailwindCSS. Implemented dynamic product rendering from JSON, Cloudinary image hosting, EmailJS contact form, and deployed via Vercel with GitHub CI workflows.
                    </p>
                    <div class="project-tech-stack">
                        <span class="project-tech">React</span>
                        <span class="project-tech">Vite</span>
                        <span class="project-tech">TailwindCSS</span>
                        <span class="project-tech">Vercel</span>
                        <span class="project-tech">Cloudinary</span>
                    </div>
                    <div class="project-metric"><i class="fas fa-tachometer-alt"></i> Optimized performance & SEO</div>
                </div>

                <div class="project-card-enhanced">
                    <canvas class="project-particles"></canvas>
                    <span class="project-type"><i class="fas fa-layer-group"></i> Full-Stack</span>
                    <h3>ISP Billing System</h3>
                    <p class="project-description">
                        Full-stack local application with React frontend, .NET 8 backend, MySQL, JWT authentication, role-based access, PDF invoice generation, and Docker Compose containerization for offline deployment.
                    </p>
                    <div class="project-tech-stack">
                        <span class="project-tech">React</span>
                        <span class="project-tech">.NET 8</span>
                        <span class="project-tech">MySQL</span>
                        <span class="project-tech">JWT</span>
                        <span class="project-tech">Docker Compose</span>
                    </div>
                    <div class="project-metric"><i class="fas fa-file-invoice-dollar"></i> End-to-end billing automation</div>
                </div>

            </div>
        </section>

        <section class="edu-certs-section" id="education">
            <div class="edu-certs-container">
                <div class="edu-certs-header">
                    <span class="sub-title"><i class="fas fa-graduation-cap"></i> 05. EDUCATION & <i class="fas fa-certificate"></i> CERTIFICATIONS</span>
                    <h2>ACADEMIC FOUNDATION</h2>
                    <p>Building expertise through formal education and continuous professional development.</p>
                </div>

                <div class="education-column">
                    <div class="education-column-title"><i class="fas fa-graduation-cap"></i> Education</div>
                    <div class="edu-timeline">
                        <div class="edu-item">
                            <div class="edu-item-years">2021 - 2025</div>
                            <div class="edu-item-degree">Bachelor's in Software Engineering</div>
                            <div class="edu-item-school">University of Central Punjab, Lahore</div>
                            <span class="edu-item-detail">CGPA: 3.73 / 4.00</span>
                        </div>
                        <div class="edu-item">
                            <div class="edu-item-years">2019 - 2021</div>
                            <div class="edu-item-degree">Intermediate in Engineering (FSc Pre-Engineering)</div>
                            <div class="edu-item-school">Forman Christian College University, Lahore</div>
                            <span class="edu-item-detail">Pre-Engineering</span>
                        </div>
                    </div>
                </div>

                <div class="certs-column">
                    <div class="certs-column-title"><i class="fas fa-certificate"></i> Certifications</div>
                    <div class="certs-grid-enhanced">
                        <div class="cert-card">
                            <div class="cert-card-title"><i class="fas fa-mobile-alt" style="color: var(--secondary); margin-right: 8px;"></i>Mobile App Development using Flutter</div>
                            <div class="cert-card-issuer">
                                <i class="fas fa-university"></i> Lahore University of Management Sciences (LUMS)
                                <span class="cert-badge">Verified</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Languages Section -->
        <section class="languages-section" id="languages" aria-labelledby="languages-title">
            <div class="glass-panel" style="max-width: 600px;">
                <span class="sub-title"><i class="fas fa-language"></i> 06. LANGUAGES</span>
                <h2 id="languages-title">COMMUNICATION</h2>
                <div class="languages-grid">
                    <div class="language-item">
                        <span class="language-name"><i class="fas fa-check-circle" style="color: var(--tertiary);"></i> English</span>
                        <span class="language-level">Professional Proficiency</span>
                    </div>
                    <div class="language-item">
                        <span class="language-name"><i class="fas fa-check-circle" style="color: var(--tertiary);"></i> Urdu</span>
                        <span class="language-level">Native Proficiency</span>
                    </div>
                    <div class="language-item">
                        <span class="language-name"><i class="fas fa-check-circle" style="color: var(--tertiary);"></i> Punjabi</span>
                        <span class="language-level">Native Proficiency</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Resume Section -->
        <section class="resume-section" id="resume" aria-labelledby="resume-title">
            <div class="resume-container">
                <div class="resume-header">
                    <span class="sub-title" style="color: var(--secondary);"><i class="fas fa-file-pdf"></i> 07. RESUME</span>
                    <h2 id="resume-title">DOWNLOAD MY CV</h2>
                    <p>View or download my complete resume for detailed information about my experience and qualifications.</p>
                </div>
                <div class="resume-content">
                    <div class="resume-preview">
                        <iframe src="resume.pdf" title="Ahmad Shakeel Resume" aria-label="Resume PDF Preview"></iframe>
                    </div>
                    <div class="resume-actions">
                        <a href="resume.pdf" download="Ahmad_Shakeel_Resume.pdf" class="cta-button resume-download">
                            <i class="fas fa-download"></i> Download Resume
                        </a>
                        <a href="resume.pdf" target="_blank" rel="noopener noreferrer" class="cta-button resume-view">
                            <i class="fas fa-external-link-alt"></i> Open in New Tab
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section class="center" id="contact" aria-labelledby="contact-title">
            <div class="glass-panel">
                <span class="sub-title"><i class="fas fa-envelope"></i> 08. CONTACT</span>
                <h2 id="contact-title">GET IN TOUCH</h2>
                <p>Let's discuss how I can help with your DevOps needs.</p>
                
                <div class="contact-links" style="display: flex; justify-content: center; gap: 20px; margin: 25px 0; flex-wrap: wrap;">
                    <a href="tel:+923238472027" class="contact-link-item" aria-label="Phone">
                        <i class="fas fa-phone"></i> +92 323 8472027
                    </a>
                    <a href="mailto:mr.ahmadshakeel29@gmail.com" class="contact-link-item" aria-label="Email">
                        <i class="fas fa-envelope"></i> Email
                    </a>
                    <a href="https://www.linkedin.com/in/mr-ahmad-shakeel" target="_blank" rel="noopener noreferrer" class="contact-link-item" aria-label="LinkedIn">
                        <i class="fab fa-linkedin"></i> LinkedIn
                    </a>
                    <a href="https://mr-ahmadshakeel.online/" target="_blank" rel="noopener noreferrer" class="contact-link-item" aria-label="Website">
                        <i class="fas fa-globe"></i> Website
                    </a>
                </div>
                
                <form action="/submit" method="post" aria-label="Contact form">
                    <label for="contact-name" class="visually-hidden">Your Name</label>
                    <input type="text" id="contact-name" name="name" placeholder="Name" required aria-required="true">
                    
                    <label for="contact-email" class="visually-hidden">Your Email</label>
                    <input type="email" id="contact-email" name="email" placeholder="Email" required aria-required="true">
                    
                    <label for="contact-message" class="visually-hidden">Your Message</label>
                    <textarea id="contact-message" name="message" placeholder="Message" required aria-required="true"></textarea>
                    
                    <button type="submit"><i class="fas fa-paper-plane"></i> SEND MESSAGE</button>
                </form>
            </div>
        </section>
    </div>

    <footer role="contentinfo">
        <div class="footer-content">
            <div class="footer-social">
                <a href="https://www.linkedin.com/in/mr-ahmad-shakeel" target="_blank" aria-label="LinkedIn Profile">
                    <i class="fab fa-linkedin"></i>
                </a>
                <a href="https://github.com/mr-ahmad-shakeel" target="_blank" aria-label="GitHub Profile">
                    <i class="fab fa-github"></i>
                </a>
                <a href="mailto:mr.ahmadshakeel29@gmail.com" aria-label="Email">
                    <i class="fas fa-envelope"></i>
                </a>
                <a href="tel:+923238472027" aria-label="Phone">
                    <i class="fas fa-phone"></i>
                </a>
            </div>
            <div class="footer-terminal">
                <span class="terminal-prompt">$</span>
                <span class="terminal-text">echo "Deployed by Ahmad Shakeel | DevOps Engineer"</span>
            </div>
            <p class="footer-copy"><i class="fas fa-code" style="color: var(--secondary);"></i> 2026 AHMAD_SHAKEEL.DEVOPS_PORTFOLIO(PROD) <i class="fas fa-terminal" style="color: var(--secondary);"></i></p>
            <p class="footer-status">
                <span class="status-indicator"></span>
                All Systems Operational | <i class="fas fa-cloud"></i> Hosted on Cloud Infrastructure
            </p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
        // Force scroll to top on page load/refresh
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }
        window.scrollTo(0, 0);
        
        // Theme colors for 3D elements - Professional DevOps Palette
        const themeColors = {
            dark: {
                accent: 0x38BDF8,      // Sky blue
                secondary: 0x1E3A5F,   // Deep navy
                particles: 0x38BDF8,   // Sky blue particles
                light: 0x38BDF8,       // Sky blue light
                tertiary: 0x00FF88,    // Bright green
                // Element-specific colors for dark mode (bright, glowing)
                aws: 0xFF9900,         // AWS Orange
                awsEmissive: 0.4,
                git: 0xF05033,         // Git red-orange
                gitEmissive: 0.5,
                docker: 0x2496ED,      // Docker blue
                dockerEmissive: 0.4,
                master: 0x326CE5,      // K8s blue
                masterEmissive: 0.4,
                worker: 0xFF9900,      // AWS orange
                workerEmissive: 0.35,
                pods: 0x10B981,        // Emerald green
                podsEmissive: 0.5,
                lambda: 0xFFBB00,      // Golden yellow
                lambdaEmissive: 0.45,
                helm: 0x818CF8,        // Indigo
                helmEmissive: 0.5,
                terraform: 0xC084FC,   // Purple
                terraformEmissive: 0.5,
                pipeline: 0x00FF88,    // Bright green
                controlPlane: 0x60A5FA,// Light blue
                serviceMesh: 0x22D3EE  // Cyan
            },
            light: {
                accent: 0x0284C7,      // Ocean blue
                secondary: 0x1E3A5F,   // Deep navy
                particles: 0x0284C7,   // Ocean blue particles
                light: 0x0284C7,       // Ocean blue light
                tertiary: 0x059669,    // Darker green
                // Element-specific colors for light mode (darker, more saturated)
                aws: 0xCC7A00,         // Darker AWS Orange
                awsEmissive: 0.2,
                git: 0xC13A25,         // Darker Git red
                gitEmissive: 0.25,
                docker: 0x1A75C4,      // Darker Docker blue
                dockerEmissive: 0.2,
                master: 0x2554A7,      // Darker K8s blue
                masterEmissive: 0.2,
                worker: 0xCC7A00,      // Darker orange
                workerEmissive: 0.2,
                pods: 0x0A8A5F,        // Darker emerald
                podsEmissive: 0.25,
                lambda: 0xCC9500,      // Darker gold
                lambdaEmissive: 0.2,
                helm: 0x5558D9,        // Darker indigo
                helmEmissive: 0.25,
                terraform: 0x8B5AC4,   // Darker purple
                terraformEmissive: 0.25,
                pipeline: 0x059669,    // Darker green
                controlPlane: 0x3B82F6,// Medium blue
                serviceMesh: 0x0891B2  // Darker cyan
            }
        };

        // Store references for 3D color updates
        let innerCoreMaterial, particlesMaterial, pointLight;

        // Mode Toggle with localStorage persistence
        function toggleMode() {
            const isLightMode = document.body.classList.toggle('light-mode');
            localStorage.setItem('theme', isLightMode ? 'light' : 'dark');
            updateModeUI(isLightMode);
            update3DColors(isLightMode ? 'light' : 'dark');
        }

        function updateModeUI(isLight) {
            const icon = document.querySelector('.mode-toggle-icon');
            const text = document.querySelector('.mode-toggle-text');
            if (icon && text) {
                icon.textContent = isLight ? '☀️' : '🌙';
                text.textContent = isLight ? 'Light' : 'Dark';
            }
        }

        function update3DColors(theme) {
            const colors = themeColors[theme];
            const r = ((colors.accent >> 16) & 255) / 255;
            const g = ((colors.accent >> 8) & 255) / 255;
            const b = (colors.accent & 255) / 255;

            // Helper function to extract RGB
            function getRGB(hex) {
                return {
                    r: ((hex >> 16) & 255) / 255,
                    g: ((hex >> 8) & 255) / 255,
                    b: (hex & 255) / 255
                };
            }

            // Update master node material
            if (innerCoreMaterial) {
                gsap.to(innerCoreMaterial.color, { r, g, b, duration: 0.5 });
            }
            
            // Update cloud particles
            if (particlesMaterial) {
                gsap.to(particlesMaterial.color, {
                    r: ((colors.particles >> 16) & 255) / 255,
                    g: ((colors.particles >> 8) & 255) / 255,
                    b: (colors.particles & 255) / 255,
                    duration: 0.5
                });
            }
            
            // Update point light
            if (pointLight) {
                gsap.to(pointLight.color, {
                    r: ((colors.light >> 16) & 255) / 255,
                    g: ((colors.light >> 8) & 255) / 255,
                    b: (colors.light & 255) / 255,
                    duration: 0.5
                });
            }

            // Update AWS Cloud elements
            if (typeof cloudMaterial !== 'undefined') {
                const aws = getRGB(colors.aws);
                gsap.to(cloudMaterial.color, { ...aws, duration: 0.5 });
                gsap.to(cloudMaterial.emissive, { ...aws, duration: 0.5 });
                cloudMaterial.emissiveIntensity = colors.awsEmissive;
            }
            if (typeof awsBoundaryMaterial !== 'undefined') {
                const aws = getRGB(colors.aws);
                gsap.to(awsBoundaryMaterial.color, { ...aws, duration: 0.5 });
            }
            if (typeof cloudGroup !== 'undefined') {
                const aws = getRGB(colors.aws);
                cloudGroup.children.forEach(child => {
                    if (child.type === 'Group') {
                        child.children.forEach(sphere => {
                            if (sphere.material) {
                                gsap.to(sphere.material.color, { ...aws, duration: 0.5 });
                                gsap.to(sphere.material.emissive, { ...aws, duration: 0.5 });
                                sphere.material.emissiveIntensity = colors.awsEmissive;
                            }
                        });
                    }
                });
            }

            // Update Git icon
            if (typeof gitMaterial !== 'undefined') {
                const git = getRGB(colors.git);
                gsap.to(gitMaterial.color, { ...git, duration: 0.5 });
                gsap.to(gitMaterial.emissive, { ...git, duration: 0.5 });
                gitMaterial.emissiveIntensity = colors.gitEmissive;
            }

            // Update Docker Registry
            if (typeof registryMaterial !== 'undefined') {
                const docker = getRGB(colors.docker);
                gsap.to(registryMaterial.color, { ...docker, duration: 0.5 });
                gsap.to(registryMaterial.emissive, { ...docker, duration: 0.5 });
                registryMaterial.emissiveIntensity = colors.dockerEmissive;
            }

            // Update Master Node
            if (typeof masterNodeMaterial !== 'undefined') {
                const master = getRGB(colors.master);
                gsap.to(masterNodeMaterial.color, { ...master, duration: 0.5 });
                gsap.to(masterNodeMaterial.emissive, { ...master, duration: 0.5 });
                masterNodeMaterial.emissiveIntensity = colors.masterEmissive;
            }

            // Update Worker Nodes
            if (typeof workerNodeMaterial !== 'undefined') {
                const worker = getRGB(colors.worker);
                gsap.to(workerNodeMaterial.color, { ...worker, duration: 0.5 });
                gsap.to(workerNodeMaterial.emissive, { ...worker, duration: 0.5 });
                workerNodeMaterial.emissiveIntensity = colors.workerEmissive;
            }

            // Update Pods
            if (typeof allPodInstances !== 'undefined') {
                const pods = getRGB(colors.pods);
                allPodInstances.forEach(podInstance => {
                    gsap.to(podInstance.material.color, { ...pods, duration: 0.5 });
                    gsap.to(podInstance.material.emissive, { ...pods, duration: 0.5 });
                    podInstance.material.emissiveIntensity = colors.podsEmissive;
                });
            }

            // Update connection lines
            if (typeof connectionLines !== 'undefined') {
                const controlPlane = getRGB(colors.controlPlane);
                const serviceMesh = getRGB(colors.serviceMesh);
                connectionLines.forEach(line => {
                    if (line.userData.type === 'control-plane') {
                        gsap.to(line.material.color, { ...controlPlane, duration: 0.5 });
                    } else if (line.userData.type === 'service-mesh') {
                        gsap.to(line.material.color, { ...serviceMesh, duration: 0.5 });
                    }
                });
            }

            // Update CI/CD pipeline
            if (typeof ciLine !== 'undefined') {
                const pipeline = getRGB(colors.pipeline);
                gsap.to(ciLine.material.color, { ...pipeline, duration: 0.5 });
            }
            if (typeof cdLine !== 'undefined') {
                const pipeline = getRGB(colors.pipeline);
                gsap.to(cdLine.material.color, { ...pipeline, duration: 0.5 });
            }

            // Update Lambda
            if (typeof lambdaMaterial !== 'undefined') {
                const lambda = getRGB(colors.lambda);
                gsap.to(lambdaMaterial.color, { ...lambda, duration: 0.5 });
                gsap.to(lambdaMaterial.emissive, { ...lambda, duration: 0.5 });
                lambdaMaterial.emissiveIntensity = colors.lambdaEmissive;
            }
            if (typeof lambdaLineMaterial !== 'undefined') {
                const lambda = getRGB(colors.lambda);
                gsap.to(lambdaLineMaterial.color, { ...lambda, duration: 0.5 });
            }

            // Update Helm and Terraform orbiting icons
            if (typeof orbitingIcons !== 'undefined') {
                const helm = getRGB(colors.helm);
                const terraform = getRGB(colors.terraform);
                orbitingIcons.children.forEach((icon, index) => {
                    if (index < 3) {
                        // Helm icons
                        gsap.to(icon.material.color, { ...helm, duration: 0.5 });
                        gsap.to(icon.material.emissive, { ...helm, duration: 0.5 });
                        icon.material.emissiveIntensity = colors.helmEmissive;
                    } else {
                        // Terraform icons
                        gsap.to(icon.material.color, { ...terraform, duration: 0.5 });
                        gsap.to(icon.material.emissive, { ...terraform, duration: 0.5 });
                        icon.material.emissiveIntensity = colors.terraformEmissive;
                    }
                });
            }
        }

        // Initialize theme from localStorage
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme || (prefersDark ? 'dark' : 'light');
            
            if (theme === 'light') {
                document.body.classList.add('light-mode');
            }
            updateModeUI(theme === 'light');
            
            // Return theme for 3D initialization
            return theme;
        }

        // Initialize theme immediately (before 3D setup)
        const initialTheme = initTheme();

        // ===========================================
        // DEVOPS INFRASTRUCTURE 3D VISUALIZATION
        // Clear Architecture Layout: Left-to-Right Flow
        // Git → CI/CD → Registry → K8s Cluster | Lambda (separate)
        // ===========================================

        // 1. Setup Scene
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(55, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 3, 22); // Start further back for cloud view
        camera.lookAt(0, 1, 0);

        const renderer = new THREE.WebGLRenderer({ canvas: document.querySelector('#webgl'), antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        // ===========================================
        // 2. MAIN INFRASTRUCTURE GROUP
        // ===========================================
        const k8sCluster = new THREE.Group();
        scene.add(k8sCluster);

        // Arrays to store references
        const nodes = [];
        const allPodInstances = [];
        const connectionLines = [];
        const dockerContainers = [];
        const lambdaFunctions = [];

        // ===========================================
        // 3. TERRAFORM GRID (Bottom foundation layer)
        // ===========================================
        const terraformGrid = new THREE.Group();
        
        const gridHelper = new THREE.GridHelper(24, 48, 0x7B42BC, 0x7B42BC);
        gridHelper.material.opacity = 0.1;
        gridHelper.material.transparent = true;
        gridHelper.position.y = -2;
        terraformGrid.add(gridHelper);
        
        k8sCluster.add(terraformGrid);

        // ===========================================
        // 4. AWS CLOUD (Boundary box with cloud puffs at corners)
        // ===========================================
        var cloudGroup = new THREE.Group();
        
        // Cloud puff material - AWS Orange (solid, high visibility)
        var cloudMaterial = new THREE.MeshStandardMaterial({
            color: 0xFF9900,
            wireframe: false,
            transparent: true,
            opacity: 0.6,
            emissive: 0xFF9900,
            emissiveIntensity: 0.4,
            metalness: 0.1,
            roughness: 0.8
        });

        // AWS boundary box dimensions
        const boxWidth = 14, boxHeight = 6, boxDepth = 8;
        const boxY = 0.5;

        // AWS boundary box - shows what's "inside" AWS
        const awsBoundaryGeometry = new THREE.BoxGeometry(boxWidth, boxHeight, boxDepth);
        const awsBoundaryEdges = new THREE.EdgesGeometry(awsBoundaryGeometry);
        var awsBoundaryMaterial = new THREE.LineBasicMaterial({
            color: 0xFF9900,
            transparent: true,
            opacity: 0.6
        });
        const awsBoundary = new THREE.LineSegments(awsBoundaryEdges, awsBoundaryMaterial);
        awsBoundary.position.set(0, boxY, 0);
        cloudGroup.add(awsBoundary);

        // Function to create a cloud puff (cluster of small spheres)
        function createCloudPuff(x, y, z, scale = 1) {
            const puffGroup = new THREE.Group();
            // Each puff is made of multiple small overlapping spheres
            const puffData = [
                { dx: 0, dy: 0, dz: 0, r: 0.4 },
                { dx: 0.25, dy: 0.1, dz: 0, r: 0.3 },
                { dx: -0.25, dy: 0.1, dz: 0, r: 0.3 },
                { dx: 0, dy: 0.15, dz: 0.2, r: 0.25 },
                { dx: 0.15, dy: -0.1, dz: -0.15, r: 0.25 },
                { dx: -0.15, dy: -0.1, dz: 0.15, r: 0.25 }
            ];
            
            puffData.forEach(({ dx, dy, dz, r }) => {
                const sphere = new THREE.Mesh(
                    new THREE.SphereGeometry(r * scale, 10, 10),
                    cloudMaterial.clone()
                );
                sphere.position.set(dx * scale, dy * scale, dz * scale);
                puffGroup.add(sphere);
            });
            
            puffGroup.position.set(x, y, z);
            return puffGroup;
        }

        // Calculate corner positions of the box
        const hw = boxWidth / 2, hh = boxHeight / 2, hd = boxDepth / 2;
        
        // Add cloud puffs at all 8 corners
        const cornerPositions = [
            // Top corners
            { x: -hw, y: boxY + hh, z: -hd },
            { x: hw, y: boxY + hh, z: -hd },
            { x: -hw, y: boxY + hh, z: hd },
            { x: hw, y: boxY + hh, z: hd },
            // Bottom corners
            { x: -hw, y: boxY - hh, z: -hd },
            { x: hw, y: boxY - hh, z: -hd },
            { x: -hw, y: boxY - hh, z: hd },
            { x: hw, y: boxY - hh, z: hd }
        ];

        cornerPositions.forEach(({ x, y, z }) => {
            const puff = createCloudPuff(x, y, z, 1.2);
            cloudGroup.add(puff);
        });

        // Add extra cloud puffs along top edges for fuller look
        const topEdgePuffs = [
            { x: 0, y: boxY + hh, z: -hd, scale: 1.0 },
            { x: 0, y: boxY + hh, z: hd, scale: 1.0 },
            { x: -hw, y: boxY + hh, z: 0, scale: 1.0 },
            { x: hw, y: boxY + hh, z: 0, scale: 1.0 }
        ];

        topEdgePuffs.forEach(({ x, y, z, scale }) => {
            const puff = createCloudPuff(x, y, z, scale);
            cloudGroup.add(puff);
        });

        k8sCluster.add(cloudGroup);

        // ===========================================
        // 5. GITHUB REPOSITORY (Far left - OUTSIDE AWS box)
        // ===========================================
        const gitPosition = new THREE.Vector3(-11, 2, 2);
        
        // Git icon - Git brand orange-red (solid, high visibility)
        const gitGeometry = new THREE.OctahedronGeometry(1.0, 0);
        var gitMaterial = new THREE.MeshStandardMaterial({
            color: 0xF05033,
            wireframe: false,
            transparent: true,
            opacity: 0.95,
            emissive: 0xF05033,
            emissiveIntensity: 0.6,
            metalness: 0.2,
            roughness: 0.5
        });
        const gitIcon = new THREE.Mesh(gitGeometry, gitMaterial);
        gitIcon.position.copy(gitPosition);
        k8sCluster.add(gitIcon);

        // Add a ring around Git icon to make it stand out
        const gitRingGeometry = new THREE.TorusGeometry(1.3, 0.08, 12, 32);
        const gitRingMaterial = new THREE.MeshBasicMaterial({
            color: 0xFFFFFF,
            transparent: true,
            opacity: 0.9
        });
        const gitRing = new THREE.Mesh(gitRingGeometry, gitRingMaterial);
        gitRing.position.copy(gitPosition);
        gitRing.rotation.x = Math.PI / 2;
        k8sCluster.add(gitRing);

        // Add small indicator spheres around Git to show it's the source
        const gitIndicatorMaterial = new THREE.MeshBasicMaterial({
            color: 0x00FF88,
            transparent: true,
            opacity: 0.95
        });
        const gitIndicators = [];
        for (let i = 0; i < 4; i++) {
            const indicator = new THREE.Mesh(
                new THREE.SphereGeometry(0.12, 10, 10),
                gitIndicatorMaterial.clone()
            );
            const angle = (i / 4) * Math.PI * 2;
            indicator.position.set(
                gitPosition.x + Math.cos(angle) * 1.6,
                gitPosition.y,
                gitPosition.z + Math.sin(angle) * 1.6
            );
            k8sCluster.add(indicator);
            gitIndicators.push(indicator);
        }

        // ===========================================
        // 6. DOCKER REGISTRY / ECR (Left of cluster)
        // ===========================================
        const registryGroup = new THREE.Group();
        registryGroup.position.set(-5, 0.5, 0);
        
        // Main registry cylinder (Docker blue - solid, clear)
        const registryGeometry = new THREE.CylinderGeometry(0.7, 0.7, 1.4, 16);
        var registryMaterial = new THREE.MeshStandardMaterial({
            color: 0x2496ED,
            wireframe: false,
            transparent: true,
            opacity: 0.85,
            emissive: 0x2496ED,
            emissiveIntensity: 0.4,
            metalness: 0.3,
            roughness: 0.5
        });
        const registry = new THREE.Mesh(registryGeometry, registryMaterial);
        registryGroup.add(registry);
        
        // Container images stacked on top
        const containerGeometry = new THREE.BoxGeometry(0.4, 0.12, 0.4);
        for (let i = 0; i < 3; i++) {
            const container = new THREE.Mesh(containerGeometry, registryMaterial.clone());
            container.position.set(0, 0.9 + i * 0.18, 0);
            container.userData = { baseY: 0.9 + i * 0.18, offset: i * 0.5 };
            registryGroup.add(container);
            dockerContainers.push(container);
        }
        
        k8sCluster.add(registryGroup);

        // ===========================================
        // 7. KUBERNETES CLUSTER (Center - Main focus)
        // Layout: Master on top, Workers in row below
        // ===========================================
        const nodeConfig = [
            // Master node - top center of cluster area
            { position: new THREE.Vector3(0, 2, 0), label: 'EKS-Master', type: 'master', color: 0x326CE5 },
            // Worker nodes - in a horizontal row below master
            { position: new THREE.Vector3(-2, 0, 0), label: 'Worker-1', type: 'ec2', color: 0xFF9900 },
            { position: new THREE.Vector3(0, 0, 0), label: 'Worker-2', type: 'ec2', color: 0xFF9900 },
            { position: new THREE.Vector3(2, 0, 0), label: 'Worker-3', type: 'ec2', color: 0xFF9900 }
        ];

        var masterNodeMaterial = new THREE.MeshStandardMaterial({
            color: 0x326CE5,
            wireframe: false,
            transparent: true,
            opacity: 0.85,
            metalness: 0.4,
            roughness: 0.4,
            emissive: 0x326CE5,
            emissiveIntensity: 0.4
        });

        var workerNodeMaterial = new THREE.MeshStandardMaterial({
            color: 0xFF9900,
            wireframe: false,
            transparent: true,
            opacity: 0.8,
            metalness: 0.3,
            roughness: 0.5,
            emissive: 0xFF9900,
            emissiveIntensity: 0.35
        });

        // Create nodes
        nodeConfig.forEach((config, index) => {
            const nodeSize = index === 0 ? 1.2 : 0.9;
            const nodeGeometry = new THREE.BoxGeometry(nodeSize, nodeSize, nodeSize);
            const material = index === 0 ? masterNodeMaterial.clone() : workerNodeMaterial.clone();
            
            const edges = new THREE.EdgesGeometry(nodeGeometry);
            const edgeMaterial = new THREE.LineBasicMaterial({ 
                color: config.color,
                transparent: true,
                opacity: 0.9
            });
            const edgeLines = new THREE.LineSegments(edges, edgeMaterial);
            
            const node = new THREE.Mesh(nodeGeometry, material);
            node.add(edgeLines);
            node.position.copy(config.position);
            node.userData = { 
                label: config.label, 
                basePosition: config.position.clone(),
                index: index,
                edgeMaterial: edgeMaterial
            };
            
            k8sCluster.add(node);
            nodes.push(node);

            // Create pods around each node
            const podsPerNode = index === 0 ? 6 : 4;
            const podGeometry = new THREE.SphereGeometry(0.12, 8, 8);
            const podMaterial = new THREE.MeshStandardMaterial({
                color: 0x10B981,
                wireframe: false,
                transparent: true,
                opacity: 0.9,
                emissive: 0x10B981,
                emissiveIntensity: 0.5
            });

            const podInstances = new THREE.InstancedMesh(podGeometry, podMaterial, podsPerNode);
            const dummy = new THREE.Object3D();

            for (let i = 0; i < podsPerNode; i++) {
                const angle = (i / podsPerNode) * Math.PI * 2;
                const radius = nodeSize * 0.55 + 0.2;
                
                dummy.position.set(
                    config.position.x + Math.cos(angle) * radius,
                    config.position.y,
                    config.position.z + Math.sin(angle) * radius
                );
                dummy.scale.setScalar(0.9);
                dummy.updateMatrix();
                podInstances.setMatrixAt(i, dummy.matrix);
            }
            
            podInstances.instanceMatrix.needsUpdate = true;
            podInstances.userData = { nodeIndex: index, podCount: podsPerNode };
            k8sCluster.add(podInstances);
            allPodInstances.push(podInstances);
        });

        // ===========================================
        // 8. CONTROL PLANE CONNECTIONS (Master → Workers)
        // ===========================================
        var controlPlaneMaterial = new THREE.LineBasicMaterial({
            color: 0x60A5FA,
            transparent: true,
            opacity: 0.8
        });

        // Master to each worker (straight lines down)
        for (let i = 1; i < nodes.length; i++) {
            const points = [nodes[0].position.clone(), nodes[i].position.clone()];
            const lineGeometry = new THREE.BufferGeometry().setFromPoints(points);
            const line = new THREE.Line(lineGeometry, controlPlaneMaterial.clone());
            line.userData = { from: 0, to: i, type: 'control-plane' };
            k8sCluster.add(line);
            connectionLines.push(line);
        }

        // Worker-to-worker connections (horizontal service mesh)
        var serviceMeshMaterial = new THREE.LineBasicMaterial({
            color: 0x22D3EE,
            transparent: true,
            opacity: 0.7
        });

        const workerConnections = [[1, 2], [2, 3]];
        workerConnections.forEach(([from, to]) => {
            const points = [nodes[from].position.clone(), nodes[to].position.clone()];
            const lineGeometry = new THREE.BufferGeometry().setFromPoints(points);
            const line = new THREE.Line(lineGeometry, serviceMeshMaterial.clone());
            line.userData = { from, to, type: 'service-mesh' };
            k8sCluster.add(line);
            connectionLines.push(line);
        });

        // ===========================================
        // 9. CI/CD PIPELINE (Git → Registry → Master)
        // ===========================================
        // CI: Git → Registry
        const ciPipelineCurve = new THREE.QuadraticBezierCurve3(
            gitPosition.clone(),
            new THREE.Vector3(-7, 2, 0),
            new THREE.Vector3(-5, 1.5, 0)
        );
        
        // CD: Registry → Master
        const cdPipelineCurve = new THREE.QuadraticBezierCurve3(
            new THREE.Vector3(-5, 0.5, 0),
            new THREE.Vector3(-2.5, 1.5, 0),
            nodes[0].position.clone()
        );

        var pipelineMaterial = new THREE.LineBasicMaterial({
            color: 0x00FF88,
            transparent: true,
            opacity: 0.85
        });

        const ciPoints = ciPipelineCurve.getPoints(30);
        const ciGeometry = new THREE.BufferGeometry().setFromPoints(ciPoints);
        var ciLine = new THREE.Line(ciGeometry, pipelineMaterial.clone());
        k8sCluster.add(ciLine);

        const cdPoints = cdPipelineCurve.getPoints(30);
        const cdGeometry = new THREE.BufferGeometry().setFromPoints(cdPoints);
        var cdLine = new THREE.Line(cdGeometry, pipelineMaterial.clone());
        k8sCluster.add(cdLine);

        const pipelineCurve = ciPipelineCurve;
        const pipeline2Curve = cdPipelineCurve;

        // ===========================================
        // 10. AWS LAMBDA (Far right - outside cluster)
        // ===========================================
        const lambdaGeometry = new THREE.TorusGeometry(0.3, 0.1, 8, 20);
        var lambdaMaterial = new THREE.MeshStandardMaterial({
            color: 0xFFBB00,
            wireframe: false,
            transparent: true,
            opacity: 0.9,
            emissive: 0xFFBB00,
            emissiveIntensity: 0.45
        });

        // Lambda functions stacked vertically on the right
        const lambdaBasePositions = [
            new THREE.Vector3(6, 2, 0),
            new THREE.Vector3(6, 0.5, 0),
            new THREE.Vector3(6, -1, 0)
        ];

        lambdaBasePositions.forEach((pos, i) => {
            const lambda = new THREE.Mesh(lambdaGeometry, lambdaMaterial.clone());
            lambda.position.copy(pos);
            lambda.rotation.x = Math.PI / 2;
            lambda.userData = { basePos: pos.clone(), offset: i * 0.8 };
            k8sCluster.add(lambda);
            lambdaFunctions.push(lambda);
        });

        // Lambda → Cluster connection
        const lambdaToClusterCurve = new THREE.QuadraticBezierCurve3(
            lambdaBasePositions[1].clone(),
            new THREE.Vector3(4, 0.5, 0),
            nodes[3].position.clone()
        );
        const lambdaLinePoints = lambdaToClusterCurve.getPoints(25);
        const lambdaLineGeometry = new THREE.BufferGeometry().setFromPoints(lambdaLinePoints);
        var lambdaLineMaterial = new THREE.LineBasicMaterial({
            color: 0xFFBB00,
            transparent: true,
            opacity: 0.7
        });
        const lambdaLine = new THREE.Line(lambdaLineGeometry, lambdaLineMaterial);
        k8sCluster.add(lambdaLine);

        // ===========================================
        // 11. HELM & TERRAFORM (Orbiting tools)
        // ===========================================
        var orbitingIcons = new THREE.Group();
        
        // Helm charts (blue) - orbit around master
        const helmGeometry = new THREE.OctahedronGeometry(0.2, 0);
        var helmMaterial = new THREE.MeshStandardMaterial({
            color: 0x818CF8,
            wireframe: false,
            transparent: true,
            opacity: 0.9,
            emissive: 0x818CF8,
            emissiveIntensity: 0.5
        });

        for (let i = 0; i < 3; i++) {
            const helm = new THREE.Mesh(helmGeometry, helmMaterial.clone());
            helm.userData = { 
                angle: (i / 3) * Math.PI * 2, 
                radius: 1.8, 
                speed: 0.3,
                yOffset: 2,
                centerX: 0
            };
            orbitingIcons.add(helm);
        }

        // Terraform modules (purple) - orbit at bottom level
        const tfGeometry = new THREE.TetrahedronGeometry(0.2, 0);
        var tfMaterial = new THREE.MeshStandardMaterial({
            color: 0xC084FC,
            wireframe: false,
            transparent: true,
            opacity: 0.9,
            emissive: 0xC084FC,
            emissiveIntensity: 0.5
        });

        for (let i = 0; i < 3; i++) {
            const tf = new THREE.Mesh(tfGeometry, tfMaterial.clone());
            tf.userData = { 
                angle: (i / 3) * Math.PI * 2 + Math.PI / 3, 
                radius: 4, 
                speed: 0.15,
                yOffset: -1.5,
                centerX: 0
            };
            orbitingIcons.add(tf);
        }

        k8sCluster.add(orbitingIcons);

        // ===========================================
        // 12. DEPLOYMENT PARTICLES (CI/CD flow)
        // ===========================================
        const deployParticleCount = 60;
        const deployGeometry = new THREE.BufferGeometry();
        const deployPositions = new Float32Array(deployParticleCount * 3);
        const deployProgress = new Float32Array(deployParticleCount);
        const deploySpeeds = new Float32Array(deployParticleCount);
        const deployPipeline = new Uint8Array(deployParticleCount);

        for (let i = 0; i < deployParticleCount; i++) {
            deployProgress[i] = Math.random();
            deploySpeeds[i] = 0.005 + Math.random() * 0.008;
            deployPipeline[i] = i < deployParticleCount / 2 ? 0 : 1;
            const curve = deployPipeline[i] === 0 ? ciPipelineCurve : cdPipelineCurve;
            const point = curve.getPoint(deployProgress[i]);
            deployPositions[i * 3] = point.x;
            deployPositions[i * 3 + 1] = point.y;
            deployPositions[i * 3 + 2] = point.z;
        }

        deployGeometry.setAttribute('position', new THREE.BufferAttribute(deployPositions, 3));
        const deployMaterial = new THREE.PointsMaterial({
            size: 0.12,
            color: 0x06D6A0,
            transparent: true,
            opacity: 0.9,
            blending: THREE.AdditiveBlending
        });
        const deployParticles = new THREE.Points(deployGeometry, deployMaterial);
        k8sCluster.add(deployParticles);

        // ===========================================
        // 12. TRAFFIC PARTICLES (flowing between nodes)
        // ===========================================
        const trafficParticleCount = 150;
        const trafficGeometry = new THREE.BufferGeometry();
        const trafficPositions = new Float32Array(trafficParticleCount * 3);
        const trafficProgress = new Float32Array(trafficParticleCount);
        const trafficSpeeds = new Float32Array(trafficParticleCount);
        const trafficLineIndices = new Uint8Array(trafficParticleCount);

        for (let i = 0; i < trafficParticleCount; i++) {
            trafficProgress[i] = Math.random();
            trafficSpeeds[i] = 0.004 + Math.random() * 0.006;
            trafficLineIndices[i] = Math.floor(Math.random() * connectionLines.length);
        }

        trafficGeometry.setAttribute('position', new THREE.BufferAttribute(trafficPositions, 3));
        const trafficMaterial = new THREE.PointsMaterial({
            size: 0.06,
            color: 0x00B4D8,
            transparent: true,
            opacity: 0.8,
            blending: THREE.AdditiveBlending
        });
        const trafficParticles = new THREE.Points(trafficGeometry, trafficMaterial);
        k8sCluster.add(trafficParticles);

        // ===========================================
        // 13. AMBIENT PARTICLES
        // ===========================================
        const cloudParticleCount = 2000;
        const cloudGeometry = new THREE.BufferGeometry();
        const cloudPositions = new Float32Array(cloudParticleCount * 3);

        for (let i = 0; i < cloudParticleCount * 3; i++) {
            cloudPositions[i] = (Math.random() - 0.5) * 30;
        }

        cloudGeometry.setAttribute('position', new THREE.BufferAttribute(cloudPositions, 3));
        
        particlesMaterial = new THREE.PointsMaterial({
            size: 0.02,
            color: themeColors[initialTheme].particles,
            transparent: true,
            opacity: 0.2
        });

        const cloudParticles = new THREE.Points(cloudGeometry, particlesMaterial);
        scene.add(cloudParticles);

        // ===========================================
        // 14. LIGHTING
        // ===========================================
        pointLight = new THREE.PointLight(0x00B4D8, 2, 50);
        pointLight.position.set(5, 8, 5);
        scene.add(pointLight);

        const pointLight2 = new THREE.PointLight(0xFF9900, 1.2, 30);
        pointLight2.position.set(-8, 3, 5);
        scene.add(pointLight2);

        const pointLight3 = new THREE.PointLight(0x7B42BC, 0.8, 25);
        pointLight3.position.set(0, -5, 0);
        scene.add(pointLight3);

        scene.add(new THREE.AmbientLight(0xffffff, 0.18));

        // ===========================================
        // 14.5 HERO CLOUD PARTICLE SYSTEM (Dense spherical cloud)
        // ===========================================
        const heroCloudParticleCount = 6000;
        const heroCloudGeometry = new THREE.BufferGeometry();
        const heroCloudPositions = new Float32Array(heroCloudParticleCount * 3);
        
        // Create spherical distribution around the AWS boundary box
        for (let i = 0; i < heroCloudParticleCount; i++) {
            // Spherical coordinates with varying radius
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.acos(2 * Math.random() - 1);
            const radius = 4 + Math.random() * 6; // Between 4 and 10 units from center
            
            heroCloudPositions[i * 3] = radius * Math.sin(phi) * Math.cos(theta);
            heroCloudPositions[i * 3 + 1] = radius * Math.sin(phi) * Math.sin(theta) + boxY;
            heroCloudPositions[i * 3 + 2] = radius * Math.cos(phi);
        }
        
        heroCloudGeometry.setAttribute('position', new THREE.BufferAttribute(heroCloudPositions, 3));
        
        const heroCloudMaterial = new THREE.PointsMaterial({
            size: 0.05,
            color: 0xFF9900,
            transparent: true,
            opacity: 0.5,
            blending: THREE.AdditiveBlending,
            sizeAttenuation: true
        });
        
        const heroCloudParticles = new THREE.Points(heroCloudGeometry, heroCloudMaterial);
        k8sCluster.add(heroCloudParticles);

        // ===========================================
        // 14.6 SCROLL PROMPT TEXT (Using sprite for simplicity)
        // ===========================================
        const scrollPromptGroup = new THREE.Group();
        
        // Create canvas for text
        const textCanvas = document.createElement('canvas');
        const textCtx = textCanvas.getContext('2d');
        textCanvas.width = 1024;
        textCanvas.height = 128;
        
        textCtx.fillStyle = 'transparent';
        textCtx.fillRect(0, 0, textCanvas.width, textCanvas.height);
        
        textCtx.font = 'bold 48px Arial, sans-serif';
        textCtx.fillStyle = '#FF9900';
        textCtx.textAlign = 'center';
        textCtx.textBaseline = 'middle';
        textCtx.fillText('Scroll to Explore DevOps Infrastructure', textCanvas.width / 2, textCanvas.height / 2);
        
        // Add glow effect
        textCtx.shadowColor = '#FF9900';
        textCtx.shadowBlur = 20;
        textCtx.fillText('Scroll to Explore DevOps Infrastructure', textCanvas.width / 2, textCanvas.height / 2);
        
        const textTexture = new THREE.CanvasTexture(textCanvas);
        const textMaterial = new THREE.SpriteMaterial({
            map: textTexture,
            transparent: true,
            opacity: 1
        });
        
        const scrollPromptSprite = new THREE.Sprite(textMaterial);
        scrollPromptSprite.scale.set(12, 1.5, 1);
        scrollPromptSprite.position.set(0, 5.5, 0);
        scrollPromptGroup.add(scrollPromptSprite);
        
        // Add animated arrow below text
        const arrowCanvas = document.createElement('canvas');
        const arrowCtx = arrowCanvas.getContext('2d');
        arrowCanvas.width = 128;
        arrowCanvas.height = 128;
        
        arrowCtx.fillStyle = 'transparent';
        arrowCtx.fillRect(0, 0, arrowCanvas.width, arrowCanvas.height);
        
        arrowCtx.strokeStyle = '#FF9900';
        arrowCtx.lineWidth = 4;
        arrowCtx.beginPath();
        arrowCtx.moveTo(64, 20);
        arrowCtx.lineTo(64, 90);
        arrowCtx.lineTo(40, 66);
        arrowCtx.moveTo(64, 90);
        arrowCtx.lineTo(88, 66);
        arrowCtx.stroke();
        
        const arrowTexture = new THREE.CanvasTexture(arrowCanvas);
        const arrowMaterial = new THREE.SpriteMaterial({
            map: arrowTexture,
            transparent: true,
            opacity: 1
        });
        
        const arrowSprite = new THREE.Sprite(arrowMaterial);
        arrowSprite.scale.set(1.5, 1.5, 1);
        arrowSprite.position.set(0, 4, 0);
        scrollPromptGroup.add(arrowSprite);
        
        k8sCluster.add(scrollPromptGroup);

        // ===========================================
        // 14.7 SET INITIAL HIDDEN STATES FOR SCROLL REVEAL
        // ===========================================
        // Store original opacities for restoration
        const originalStates = {
            gitMaterialOpacity: gitMaterial.opacity,
            gitRingOpacity: gitRingMaterial.opacity,
            registryOpacity: registryMaterial.opacity,
            masterOpacity: masterNodeMaterial.opacity,
            workerOpacity: workerNodeMaterial.opacity,
            pipelineOpacity: pipelineMaterial.opacity,
            lambdaOpacity: lambdaMaterial.opacity,
            trafficOpacity: trafficMaterial.opacity,
            deployOpacity: deployMaterial.opacity,
            awsBoundaryOpacity: awsBoundaryMaterial.opacity,
            cloudMaterialOpacity: cloudMaterial.opacity
        };
        
        // Hide Git elements initially
        gitMaterial.opacity = 0;
        gitRingMaterial.opacity = 0;
        gitIndicatorMaterial.opacity = 0;
        gitIcon.scale.set(0, 0, 0);
        gitRing.scale.set(0, 0, 0);
        // Hide all git indicators
        gitIndicators.forEach(ind => {
            ind.scale.set(0, 0, 0);
            ind.material.opacity = 0;
        });
        
        // Hide Registry
        registryMaterial.opacity = 0;
        registryGroup.scale.set(0, 0, 0);
        
        // Hide Kubernetes cluster nodes
        masterNodeMaterial.opacity = 0;
        workerNodeMaterial.opacity = 0;
        nodes.forEach(node => {
            node.scale.set(0, 0, 0);
        });
        
        // Hide pods
        allPodInstances.forEach(pods => {
            pods.material.opacity = 0;
        });
        
        // Hide connections
        connectionLines.forEach(line => {
            line.material.opacity = 0;
        });
        
        // Hide CI/CD pipeline
        pipelineMaterial.opacity = 0;
        ciLine.material.opacity = 0;
        cdLine.material.opacity = 0;
        deployMaterial.opacity = 0;
        
        // Hide Lambda
        lambdaMaterial.opacity = 0;
        lambdaLineMaterial.opacity = 0;
        lambdaFunctions.forEach(lambda => {
            lambda.scale.set(0, 0, 0);
        });
        
        // Hide orbiting icons
        orbitingIcons.children.forEach(icon => {
            icon.material.opacity = 0;
            icon.scale.set(0, 0, 0);
        });
        
        // Hide traffic particles
        trafficMaterial.opacity = 0;
        
        // Initially dim the boundary and cloud puffs
        awsBoundaryMaterial.opacity = 0.1;
        cloudGroup.children.forEach(child => {
            if (child.type === 'Group') {
                child.children.forEach(sphere => {
                    if (sphere.material) sphere.material.opacity = 0.15;
                });
            }
        });
        
        // Terraform grid initially hidden
        terraformGrid.children.forEach(child => {
            if (child.material) child.material.opacity = 0;
        });

        // Track scroll state
        let hasScrolled = false;

        innerCoreMaterial = masterNodeMaterial;

        // ===========================================
        // 15. ANIMATION LOOP
        // ===========================================
        const clock = new THREE.Clock();
        const dummy = new THREE.Object3D();
        
        let deploymentBurst = { active: false, scale: 1, startTime: 0 };
        
        // Store current scroll stage for animations
        let currentScrollStage = 0;

        function animate() {
            const t = clock.getElapsedTime();

            // Hero cloud particles rotation and breathing
            heroCloudParticles.rotation.y = t * 0.05;
            heroCloudParticles.rotation.x = Math.sin(t * 0.1) * 0.1;
            
            // Update hero cloud particle positions for breathing effect
            const heroPositions = heroCloudParticles.geometry.attributes.position.array;
            for (let i = 0; i < heroCloudParticleCount; i++) {
                const idx = i * 3;
                const originalRadius = Math.sqrt(
                    heroPositions[idx] * heroPositions[idx] + 
                    (heroPositions[idx + 1] - boxY) * (heroPositions[idx + 1] - boxY) + 
                    heroPositions[idx + 2] * heroPositions[idx + 2]
                );
                if (originalRadius > 0) {
                    const breathe = 1 + Math.sin(t * 0.3 + i * 0.01) * 0.03;
                    const scale = breathe;
                    // Apply subtle breathing without changing direction
                }
            }
            
            // Scroll prompt arrow bobbing animation
            if (scrollPromptGroup.visible) {
                arrowSprite.position.y = 4 + Math.sin(t * 2) * 0.3;
                scrollPromptSprite.material.opacity = 0.7 + Math.sin(t * 1.5) * 0.3;
                arrowSprite.material.opacity = 0.7 + Math.sin(t * 1.5 + 0.5) * 0.3;
            }

            // Very subtle cluster rotation
            k8sCluster.rotation.y = Math.sin(t * 0.08) * 0.1;

            // Node breathing effect - only if nodes are visible (scale > 0)
            nodes.forEach((node, index) => {
                if (node.scale.x > 0.1) {
                    const breathe = 1 + Math.sin(t * 1.5 + index * 0.5) * 0.02;
                    const baseSize = index === 0 ? 1.2 : 0.9;
                    const currentScale = node.scale.x / baseSize; // Get current animation scale
                    node.scale.setScalar(breathe * baseSize * Math.min(currentScale, 1));
                    node.position.y = node.userData.basePosition.y + Math.sin(t * 0.8 + index * 0.3) * 0.03;
                }
            });

            // Pods orbit their nodes
            const burstMultiplier = deploymentBurst.active ? 
                1 + Math.sin((t - deploymentBurst.startTime) * 8) * 0.2 : 1;

            allPodInstances.forEach((podMesh, nodeIndex) => {
                const node = nodes[nodeIndex];
                const podCount = podMesh.userData.podCount;
                const nodeSize = nodeIndex === 0 ? 1.2 : 0.9;

                for (let i = 0; i < podCount; i++) {
                    const angle = (i / podCount) * Math.PI * 2 + t * 0.3;
                    const radius = nodeSize * 0.55 + 0.2;
                    
                    dummy.position.x = node.position.x + Math.cos(angle) * radius;
                    dummy.position.z = node.position.z + Math.sin(angle) * radius;
                    dummy.position.y = node.position.y;

                    const scale = (0.8 + Math.sin(t * 2 + i) * 0.1) * burstMultiplier;
                    dummy.scale.setScalar(scale);
                    dummy.updateMatrix();
                    podMesh.setMatrixAt(i, dummy.matrix);
                }
                podMesh.instanceMatrix.needsUpdate = true;
            });

            if (deploymentBurst.active && t - deploymentBurst.startTime > 2) {
                deploymentBurst.active = false;
            }

            // Docker containers float on registry
            dockerContainers.forEach((container, i) => {
                if (container.userData.baseY !== undefined) {
                    container.position.y = container.userData.baseY + Math.sin(t * 0.6 + container.userData.offset) * 0.08;
                }
            });

            // Lambda functions pulse
            lambdaFunctions.forEach((lambda, i) => {
                lambda.position.y = lambda.userData.basePos.y + Math.sin(t * 0.5 + lambda.userData.offset) * 0.15;
                lambda.rotation.x = t * 0.5;
                lambda.rotation.z = t * 0.3;
                lambda.scale.setScalar(1 + Math.sin(t * 1.5 + i) * 0.1);
            });

            // Cloud puffs animation - gentle breathing at corners
            cloudGroup.children.forEach((child, i) => {
                // Animate cloud puff groups (skip the boundary box which is index 0)
                if (child.type === 'Group') {
                    const breathe = 1 + Math.sin(t * 0.4 + i * 0.3) * 0.08;
                    child.scale.setScalar(breathe);
                }
            });

            // Git icon spin and ring rotation
            gitIcon.rotation.y = t * 0.5;
            gitIcon.rotation.x = Math.sin(t * 0.3) * 0.2;
            gitRing.rotation.z = t * 0.3;

            // Update connection lines
            connectionLines.forEach(line => {
                const fromNode = nodes[line.userData.from];
                const toNode = nodes[line.userData.to];
                const positions = line.geometry.attributes.position.array;
                
                positions[0] = fromNode.position.x;
                positions[1] = fromNode.position.y;
                positions[2] = fromNode.position.z;
                positions[3] = toNode.position.x;
                positions[4] = toNode.position.y;
                positions[5] = toNode.position.z;
                
                line.geometry.attributes.position.needsUpdate = true;
                
                const pulseSpeed = line.userData.type === 'control-plane' ? 2 : 1.5;
                line.material.opacity = 0.3 + Math.sin(t * pulseSpeed + line.userData.from) * 0.15;
            });

            // Traffic particles flow along connections
            const trafficPos = trafficParticles.geometry.attributes.position.array;
            for (let i = 0; i < trafficParticleCount; i++) {
                trafficProgress[i] += trafficSpeeds[i];
                if (trafficProgress[i] > 1) {
                    trafficProgress[i] = 0;
                    trafficLineIndices[i] = Math.floor(Math.random() * connectionLines.length);
                }

                const line = connectionLines[trafficLineIndices[i]];
                if (line) {
                    const fromNode = nodes[line.userData.from];
                    const toNode = nodes[line.userData.to];
                    const progress = trafficProgress[i];

                    trafficPos[i * 3] = fromNode.position.x + (toNode.position.x - fromNode.position.x) * progress;
                    trafficPos[i * 3 + 1] = fromNode.position.y + (toNode.position.y - fromNode.position.y) * progress;
                    trafficPos[i * 3 + 2] = fromNode.position.z + (toNode.position.z - fromNode.position.z) * progress;
                }
            }
            trafficParticles.geometry.attributes.position.needsUpdate = true;

            // Deployment particles flow through CI/CD pipeline
            const deployPos = deployParticles.geometry.attributes.position.array;
            for (let i = 0; i < deployParticleCount; i++) {
                deployProgress[i] += deploySpeeds[i];
                if (deployProgress[i] > 1) {
                    deployProgress[i] = 0;
                }
                const curve = deployPipeline[i] === 0 ? ciPipelineCurve : cdPipelineCurve;
                const point = curve.getPoint(deployProgress[i]);
                deployPos[i * 3] = point.x;
                deployPos[i * 3 + 1] = point.y + Math.sin(t * 3 + i) * 0.03;
                deployPos[i * 3 + 2] = point.z;
            }
            deployParticles.geometry.attributes.position.needsUpdate = true;

            // Orbiting Helm/Terraform icons
            orbitingIcons.children.forEach((icon, i) => {
                const data = icon.userData;
                const angle = t * data.speed + data.angle;
                const centerX = data.centerX || 0;
                icon.position.x = centerX + Math.cos(angle) * data.radius;
                icon.position.z = Math.sin(angle) * data.radius;
                icon.position.y = data.yOffset + Math.sin(t * 0.5 + i) * 0.15;
                icon.rotation.x = t * 0.4 + i;
                icon.rotation.z = t * 0.3 + i * 0.5;
            });

            // Ambient particles
            cloudParticles.rotation.y = t * 0.01;

            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        
        // Apply initial theme colors before starting animation
        update3DColors(initialTheme);
        
        animate();

        // Deployment burst trigger
        function triggerDeploymentBurst() {
            deploymentBurst.active = true;
            deploymentBurst.startTime = clock.getElapsedTime();
        }

        // ===========================================
        // 18. RAYCASTING & TOOLTIP INTERACTION
        // ===========================================
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        const tooltip = document.getElementById('tooltip3d');
        const tooltipIcon = document.getElementById('tooltipIcon');
        const tooltipTitle = document.getElementById('tooltipTitle');
        const tooltipType = document.getElementById('tooltipType');
        const tooltipDesc = document.getElementById('tooltipDesc');
        const tooltipStats = document.getElementById('tooltipStats');
        
        // Store all interactive objects with their metadata
        const interactiveObjects = [];
        
        // Add nodes to interactive objects
        nodes.forEach((node, index) => {
            const nodeData = nodeConfig[index];
            node.userData.tooltipData = {
                icon: index === 0 ? 'fas fa-dharmachakra' : 'fab fa-aws',
                iconClass: index === 0 ? 'k8s' : 'aws',
                title: nodeData.label,
                type: index === 0 ? 'Kubernetes Control Plane' : 'EC2 Worker Node',
                desc: index === 0 
                    ? 'Central orchestration node managing workload scheduling, API server, and cluster state across all worker nodes.' 
                    : 'Compute instance running containerized workloads. Pods are scheduled here by the control plane.',
                stats: [
                    { icon: 'fas fa-circle', text: 'Running', color: '#06D6A0' },
                    { icon: 'fas fa-cubes', text: `${allPodInstances[index]?.userData?.podCount || 0} Pods` }
                ]
            };
            interactiveObjects.push(node);
        });
        
        // Add Docker containers to interactive objects
        dockerContainers.forEach((docker, i) => {
            docker.userData.tooltipData = {
                icon: 'fab fa-docker',
                iconClass: 'docker',
                title: `Container-${i + 1}`,
                type: 'Docker Container',
                desc: 'Isolated runtime environment packaging application code, dependencies, and configuration for consistent deployments.',
                stats: [
                    { icon: 'fas fa-box', text: 'Image: node:18-alpine' },
                    { icon: 'fas fa-memory', text: '256MB RAM' }
                ]
            };
            interactiveObjects.push(docker);
        });
        
        // Add Lambda functions to interactive objects
        lambdaFunctions.forEach((lambda, i) => {
            const lambdaNames = ['API-Handler', 'S3-Processor', 'EventBridge-Trigger'];
            const lambdaTriggers = ['API Gateway', 'S3 Event', 'EventBridge'];
            lambda.userData.tooltipData = {
                icon: 'fab fa-aws',
                iconClass: 'aws',
                title: lambdaNames[i] || `Lambda-${i + 1}`,
                type: 'AWS Lambda Function',
                desc: `Serverless compute triggered by ${lambdaTriggers[i]}. Auto-scales from zero to thousands of concurrent executions.`,
                stats: [
                    { icon: 'fas fa-bolt', text: 'Invocations: 10k/day' },
                    { icon: 'fas fa-clock', text: 'Avg: 120ms' }
                ]
            };
            interactiveObjects.push(lambda);
        });
        
        // Add orbiting icons (Helm/Terraform)
        orbitingIcons.children.forEach((icon, i) => {
            const isHelm = i < 3;
            icon.userData.tooltipData = {
                icon: isHelm ? 'fas fa-anchor' : 'fas fa-cube',
                iconClass: isHelm ? 'helm' : 'terraform',
                title: isHelm ? `helm-chart-${i + 1}` : `tf-module-${i - 2}`,
                type: isHelm ? 'Helm Chart' : 'Terraform Module',
                desc: isHelm 
                    ? 'Kubernetes package manager. Bundles manifests, configs, and dependencies for reproducible deployments.'
                    : 'Infrastructure as Code module. Defines cloud resources in declarative configuration files.',
                stats: isHelm 
                    ? [{ icon: 'fas fa-code-branch', text: 'v3.12.0' }, { icon: 'fas fa-file-code', text: '12 templates' }]
                    : [{ icon: 'fas fa-cloud', text: 'AWS Provider' }, { icon: 'fas fa-sitemap', text: '8 resources' }]
            };
            interactiveObjects.push(icon);
        });
        
        // Add Git icon to interactive objects
        gitIcon.userData.tooltipData = {
            icon: 'fab fa-github',
            iconClass: 'cicd',
            title: 'GitHub Repository',
            type: 'Source Control',
            desc: 'Version-controlled source code repository. Triggers CI/CD pipeline on push events to main branch.',
            stats: [
                { icon: 'fas fa-code-branch', text: 'Branch: main' },
                { icon: 'fas fa-history', text: '1,247 commits' }
            ]
        };
        interactiveObjects.push(gitIcon);
        
        // Add registry to interactive objects
        registry.userData.tooltipData = {
            icon: 'fab fa-docker',
            iconClass: 'docker',
            title: 'ECR Registry',
            type: 'Container Registry',
            desc: 'Amazon Elastic Container Registry storing Docker images. Integrated with EKS for seamless image pulls.',
            stats: [
                { icon: 'fas fa-box', text: '12 repositories' },
                { icon: 'fas fa-download', text: '50k pulls/month' }
            ]
        };
        interactiveObjects.push(registry);
        
        // Add cloud puffs only (not the boundary box)
        const cloudTooltipData = {
            icon: 'fab fa-aws',
            iconClass: 'aws',
            title: 'AWS Cloud',
            type: 'Cloud Infrastructure',
            desc: 'Amazon Web Services cloud platform hosting VPCs, subnets, and managed services for the infrastructure.',
            stats: [
                { icon: 'fas fa-map-marker-alt', text: 'Region: us-east-1' },
                { icon: 'fas fa-shield-alt', text: 'Multi-AZ' }
            ]
        };
        // Only add tooltip to cloud puffs (Groups with spheres), not to the boundary box
        cloudGroup.children.forEach(child => {
            if (child.type === 'Group') {
                // This is a cloud puff - add tooltip to each sphere in the puff
                child.children.forEach(sphere => {
                    sphere.userData.tooltipData = cloudTooltipData;
                    interactiveObjects.push(sphere);
                });
            }
        });
        
        // CI/CD pipeline tooltip data (visual only, handled by Git icon interaction)
        ciLine.userData.tooltipData = {
            icon: 'fab fa-github',
            iconClass: 'cicd',
            title: 'CI Pipeline',
            type: 'GitHub Actions Build',
            desc: 'Automated build pipeline: Code → Test → Build → Push to ECR. Runs on every push to main branch.',
            stats: [
                { icon: 'fas fa-check-circle', text: 'Build: Passing' },
                { icon: 'fas fa-clock', text: 'Avg: 4m 32s' }
            ]
        };
        
        cdLine.userData.tooltipData = {
            icon: 'fas fa-rocket',
            iconClass: 'cicd',
            title: 'CD Pipeline',
            type: 'ArgoCD Deployment',
            desc: 'Continuous deployment from ECR to EKS cluster. GitOps-based with automatic rollback on failure.',
            stats: [
                { icon: 'fas fa-sync', text: 'Auto-sync: ON' },
                { icon: 'fas fa-shield-alt', text: 'Rollback: Ready' }
            ]
        };
        
        let hoveredObject = null;
        let isTooltipLocked = false;
        
        function updateTooltip(data, screenPos) {
            tooltipIcon.className = `tooltip-3d-icon ${data.iconClass}`;
            tooltipIcon.innerHTML = `<i class="${data.icon}"></i>`;
            tooltipTitle.textContent = data.title;
            tooltipType.textContent = data.type;
            tooltipDesc.textContent = data.desc;
            
            tooltipStats.innerHTML = data.stats.map(stat => 
                `<div class="tooltip-3d-stat"><i class="${stat.icon}" style="color: ${stat.color || '#06D6A0'}"></i> <span>${stat.text}</span></div>`
            ).join('');
            
            tooltip.style.left = `${screenPos.x}px`;
            tooltip.style.top = `${screenPos.y - 15}px`;
            tooltip.classList.add('visible');
        }
        
        function hideTooltip() {
            if (!isTooltipLocked) {
                tooltip.classList.remove('visible');
            }
        }
        
        function getScreenPosition(object, cam) {
            const activeCamera = cam || camera;
            const vector = new THREE.Vector3();
            object.getWorldPosition(vector);
            vector.project(activeCamera);
            
            return {
                x: (vector.x * 0.5 + 0.5) * window.innerWidth,
                y: (-vector.y * 0.5 + 0.5) * window.innerHeight
            };
        }
        
        // Mouse move handler
        function onMouseMove(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            // Use architecture camera if in architecture view mode
            const activeCamera = (typeof isArchitectureViewActive !== 'undefined' && isArchitectureViewActive && archCamera) ? archCamera : camera;
            
            raycaster.setFromCamera(mouse, activeCamera);
            const intersects = raycaster.intersectObjects(interactiveObjects, false);
            
            if (intersects.length > 0) {
                const object = intersects[0].object;
                if (object.userData.tooltipData && !isTooltipLocked) {
                    hoveredObject = object;
                    const screenPos = getScreenPosition(object, activeCamera);
                    updateTooltip(object.userData.tooltipData, screenPos);
                    document.body.style.cursor = 'pointer';
                    
                    // Highlight effect
                    if (object.material && object.material.emissiveIntensity !== undefined) {
                        gsap.to(object.material, { emissiveIntensity: 0.5, duration: 0.3 });
                    }
                }
            } else {
                if (hoveredObject && hoveredObject.material && !isTooltipLocked) {
                    gsap.to(hoveredObject.material, { emissiveIntensity: 0.15, duration: 0.3 });
                }
                hoveredObject = null;
                hideTooltip();
                document.body.style.cursor = 'default';
            }
        }
        
        // Click handler to lock/unlock tooltip
        function onClick(event) {
            if (hoveredObject && hoveredObject.userData.tooltipData) {
                isTooltipLocked = !isTooltipLocked;
                if (isTooltipLocked) {
                    tooltip.style.pointerEvents = 'auto';
                } else {
                    tooltip.style.pointerEvents = 'none';
                    hideTooltip();
                }
            } else if (isTooltipLocked) {
                isTooltipLocked = false;
                tooltip.style.pointerEvents = 'none';
                hideTooltip();
            }
        }
        
        // Add event listeners
        window.addEventListener('mousemove', onMouseMove, false);
        window.addEventListener('click', onClick, false);
        
        // Legend toggle functionality
        const legend = document.getElementById('legend3d');
        const legendToggle = document.getElementById('legendToggle');
        
        legendToggle.addEventListener('click', () => {
            legend.classList.toggle('collapsed');
            legendToggle.innerHTML = legend.classList.contains('collapsed') 
                ? '<i class="fas fa-chevron-up"></i>' 
                : '<i class="fas fa-chevron-down"></i>';
        });
        
        // Legend item hover highlight
        document.querySelectorAll('.legend-3d-item').forEach(item => {
            item.addEventListener('mouseenter', () => {
                const highlightType = item.dataset.highlight;
                highlightElements(highlightType, true);
            });
            
            item.addEventListener('mouseleave', () => {
                const highlightType = item.dataset.highlight;
                highlightElements(highlightType, false);
            });
        });
        
        function highlightElements(type, highlight) {
            const intensity = highlight ? 0.6 : 0.15;
            const scale = highlight ? 1.3 : 1;
            
            switch(type) {
                case 'master':
                    gsap.to(nodes[0].scale, { x: scale, y: scale, z: scale, duration: 0.3 });
                    gsap.to(masterNodeMaterial, { emissiveIntensity: intensity, duration: 0.3 });
                    break;
                case 'ec2':
                    nodes.slice(1).forEach(node => {
                        gsap.to(node.scale, { x: scale, y: scale, z: scale, duration: 0.3 });
                        if (node.material) gsap.to(node.material, { emissiveIntensity: intensity, duration: 0.3 });
                    });
                    break;
                case 'docker':
                    dockerContainers.forEach(docker => {
                        gsap.to(docker.scale, { x: scale, y: scale, z: scale, duration: 0.3 });
                        if (docker.material) gsap.to(docker.material, { emissiveIntensity: intensity, duration: 0.3 });
                    });
                    // Also highlight registry
                    gsap.to(registry.scale, { x: scale, y: scale, z: scale, duration: 0.3 });
                    gsap.to(registry.material, { emissiveIntensity: intensity, duration: 0.3 });
                    break;
                case 'lambda':
                    lambdaFunctions.forEach(lambda => {
                        gsap.to(lambda.scale, { x: scale, y: scale, z: scale, duration: 0.3 });
                        gsap.to(lambda.material, { emissiveIntensity: intensity, duration: 0.3 });
                    });
                    break;
                case 'terraform':
                    orbitingIcons.children.slice(3).forEach(icon => {
                        gsap.to(icon.scale, { x: scale, y: scale, z: scale, duration: 0.3 });
                        gsap.to(icon.material, { emissiveIntensity: intensity, duration: 0.3 });
                    });
                    break;
                case 'helm':
                    orbitingIcons.children.slice(0, 3).forEach(icon => {
                        gsap.to(icon.scale, { x: scale, y: scale, z: scale, duration: 0.3 });
                        gsap.to(icon.material, { emissiveIntensity: intensity, duration: 0.3 });
                    });
                    break;
                case 'cicd':
                    gsap.to(pipelineMaterial, { opacity: highlight ? 0.9 : 0.5, duration: 0.3 });
                    gsap.to(deployMaterial, { opacity: highlight ? 1 : 0.9, size: highlight ? 0.15 : 0.12, duration: 0.3 });
                    gsap.to(gitIcon.material, { emissiveIntensity: intensity, duration: 0.3 });
                    break;
                case 'traffic':
                    gsap.to(trafficMaterial, { opacity: highlight ? 1 : 0.8, size: highlight ? 0.1 : 0.06, duration: 0.3 });
                    connectionLines.forEach(line => {
                        gsap.to(line.material, { opacity: highlight ? 0.7 : 0.3, duration: 0.3 });
                    });
                    break;
            }
        }

        // ===========================================
        // 10. GSAP SCROLL ANIMATIONS - STAGED DEVOPS REVEAL
        // ===========================================
        gsap.registerPlugin(ScrollTrigger);

        // ===========================================
        // STAGE 0: INITIAL HERO STATE (Abstract Cloud)
        // Hide scroll prompt on first scroll detection
        // ===========================================
        ScrollTrigger.create({
            trigger: "#hero",
            start: "top top",
            end: "bottom top",
            onLeave: () => {
                if (!hasScrolled) {
                    hasScrolled = true;
                    // Fade out scroll prompt
                    gsap.to(scrollPromptSprite.material, { opacity: 0, duration: 0.5 });
                    gsap.to(arrowSprite.material, { opacity: 0, duration: 0.5 });
                    setTimeout(() => {
                        scrollPromptGroup.visible = false;
                    }, 600);
                }
            }
        });

        // ===========================================
        // STAGE 1: ABOUT SECTION - Enter Cloud
        // Zoom to z=12, fade in boundary & puffs, reveal Git
        // ===========================================
        ScrollTrigger.create({
            trigger: "#about",
            start: "top 80%",
            end: "bottom 20%",
            onEnter: () => {
                currentScrollStage = 1;
                
                // Fade out hero cloud particles
                gsap.to(heroCloudMaterial, { opacity: 0.15, duration: 1 });
                
                // Zoom camera - slight angle to show Git clearly
                gsap.to(camera.position, { x: -3, y: 4, z: 14, duration: 1.5, ease: "power2.out" });
                
                // Fade in AWS boundary box
                gsap.to(awsBoundaryMaterial, { opacity: 0.6, duration: 1 });
                
                // Fade in cloud puffs
                cloudGroup.children.forEach((child, i) => {
                    if (child.type === 'Group') {
                        child.children.forEach(sphere => {
                            if (sphere.material) {
                                gsap.to(sphere.material, { opacity: 0.6, duration: 0.8, delay: i * 0.05 });
                            }
                        });
                    }
                });
                
                // Reveal Git icon with scale animation - LARGER and more dramatic
                gsap.to(gitIcon.scale, { x: 1, y: 1, z: 1, duration: 1, ease: "elastic.out(1, 0.5)" });
                gsap.to(gitMaterial, { opacity: 0.95, duration: 0.6 });
                gsap.to(gitRing.scale, { x: 1, y: 1, z: 1, duration: 0.8, delay: 0.3, ease: "back.out(1.7)" });
                gsap.to(gitRingMaterial, { opacity: 0.9, duration: 0.6, delay: 0.3 });
                
                // Reveal Git indicators with staggered animation
                gitIndicators.forEach((ind, i) => {
                    gsap.to(ind.scale, { x: 1, y: 1, z: 1, duration: 0.5, delay: 0.5 + i * 0.1, ease: "back.out(2)" });
                    gsap.to(ind.material, { opacity: 0.95, duration: 0.4, delay: 0.5 + i * 0.1 });
                });
            },
            onLeaveBack: () => {
                currentScrollStage = 0;
                
                // Restore hero cloud
                gsap.to(heroCloudMaterial, { opacity: 0.5, duration: 1 });
                gsap.to(camera.position, { x: 0, y: 3, z: 22, duration: 1.5 });
                
                // Hide elements
                gsap.to(awsBoundaryMaterial, { opacity: 0.1, duration: 0.8 });
                cloudGroup.children.forEach(child => {
                    if (child.type === 'Group') {
                        child.children.forEach(sphere => {
                            if (sphere.material) gsap.to(sphere.material, { opacity: 0.15, duration: 0.5 });
                        });
                    }
                });
                gsap.to(gitIcon.scale, { x: 0, y: 0, z: 0, duration: 0.5 });
                gsap.to(gitMaterial, { opacity: 0, duration: 0.4 });
                gsap.to(gitRing.scale, { x: 0, y: 0, z: 0, duration: 0.5 });
                gsap.to(gitRingMaterial, { opacity: 0, duration: 0.4 });
                
                // Hide git indicators
                gitIndicators.forEach(ind => {
                    gsap.to(ind.scale, { x: 0, y: 0, z: 0, duration: 0.4 });
                    gsap.to(ind.material, { opacity: 0, duration: 0.3 });
                });
                
                // Show scroll prompt again
                if (!hasScrolled) {
                    scrollPromptGroup.visible = true;
                    gsap.to(scrollPromptSprite.material, { opacity: 1, duration: 0.5 });
                    gsap.to(arrowSprite.material, { opacity: 1, duration: 0.5 });
                }
            }
        });

        // ===========================================
        // STAGE 2: SKILLS SECTION - Mid-Level View
        // Dive to z=8, reveal Docker registry & CI/CD pipelines
        // ===========================================
        ScrollTrigger.create({
            trigger: "#skills",
            start: "top 80%",
            end: "bottom 20%",
            onEnter: () => {
                currentScrollStage = 2;
                
                // Zoom closer - center view on registry & CI/CD pipeline
                gsap.to(camera.position, { x: -2, y: 3, z: 10, duration: 1.2, ease: "power2.out" });
                gsap.to(k8sCluster.position, { x: 2, duration: 1.2 });
                
                // Further fade hero cloud
                gsap.to(heroCloudMaterial, { opacity: 0.05, duration: 1 });
                
                // Reveal Docker Registry with scale
                gsap.to(registryGroup.scale, { x: 1, y: 1, z: 1, duration: 0.8, ease: "back.out(1.7)" });
                gsap.to(registryMaterial, { opacity: 0.85, duration: 0.6 });
                
                // Animate container stacking
                dockerContainers.forEach((container, i) => {
                    gsap.to(container.material, { opacity: 0.85, duration: 0.4, delay: 0.3 + i * 0.15 });
                    gsap.from(container.position, { y: container.userData.baseY + 2, duration: 0.6, delay: 0.3 + i * 0.15, ease: "bounce.out" });
                });
                
                // Reveal CI/CD pipelines with flowing particles
                gsap.to(ciLine.material, { opacity: 0.85, duration: 0.8 });
                gsap.to(cdLine.material, { opacity: 0.85, duration: 0.8, delay: 0.2 });
                gsap.to(deployMaterial, { opacity: 0.9, duration: 0.8, delay: 0.4 });
                
                // Docker blue pulse effect
                const dockerPulse = gsap.timeline({ repeat: 2 });
                dockerPulse.to(registryMaterial, { emissiveIntensity: 0.7, duration: 0.3 })
                    .to(registryMaterial, { emissiveIntensity: 0.4, duration: 0.3 });
            },
            onLeaveBack: () => {
                currentScrollStage = 1;
                
                gsap.to(camera.position, { x: -3, y: 4, z: 14, duration: 1 });
                gsap.to(k8sCluster.position, { x: 0, duration: 1 });
                gsap.to(heroCloudMaterial, { opacity: 0.15, duration: 0.8 });
                
                // Hide registry
                gsap.to(registryGroup.scale, { x: 0, y: 0, z: 0, duration: 0.5 });
                gsap.to(registryMaterial, { opacity: 0, duration: 0.4 });
                dockerContainers.forEach(container => {
                    gsap.to(container.material, { opacity: 0, duration: 0.3 });
                });
                
                // Hide pipelines
                gsap.to(ciLine.material, { opacity: 0, duration: 0.5 });
                gsap.to(cdLine.material, { opacity: 0, duration: 0.5 });
                gsap.to(deployMaterial, { opacity: 0, duration: 0.5 });
            }
        });

        // ===========================================
        // STAGE 3: EXPERIENCE SECTION - Cluster Core
        // Zoom to z=5, reveal K8s cluster with hierarchy
        // ===========================================
        ScrollTrigger.create({
            trigger: "#experience",
            start: "top 80%",
            end: "bottom 20%",
            onEnter: () => {
                currentScrollStage = 3;
                
                // Close zoom - elevated angle to show K8s cluster hierarchy
                gsap.to(camera.position, { x: 0, y: 5, z: 9, duration: 1.2, ease: "power2.out" });
                gsap.to(k8sCluster.position, { x: 0, y: 0, duration: 1 });
                gsap.to(k8sCluster.rotation, { y: Math.PI * 0.15, duration: 1.2 });
                
                // Hide hero cloud completely
                gsap.to(heroCloudMaterial, { opacity: 0, duration: 0.8 });
                
                // Reveal Master node first
                gsap.to(nodes[0].scale, { x: 1.2, y: 1.2, z: 1.2, duration: 0.8, ease: "back.out(1.7)" });
                gsap.to(masterNodeMaterial, { opacity: 0.85, duration: 0.6 });
                
                // Then reveal workers with stagger
                nodes.slice(1).forEach((node, i) => {
                    gsap.to(node.scale, { x: 0.9, y: 0.9, z: 0.9, duration: 0.7, delay: 0.4 + i * 0.15, ease: "back.out(1.7)" });
                    gsap.to(node.material, { opacity: 0.8, duration: 0.5, delay: 0.4 + i * 0.15 });
                });
                gsap.to(workerNodeMaterial, { opacity: 0.8, duration: 0.6, delay: 0.4 });
                
                // Control plane lines pulse in
                connectionLines.forEach((line, i) => {
                    if (line.userData.type === 'control-plane') {
                        gsap.to(line.material, { opacity: 0.8, duration: 0.5, delay: 0.8 + i * 0.1 });
                        // Pulse effect
                        gsap.to(line.material, { opacity: 1, duration: 0.2, delay: 1 + i * 0.1, yoyo: true, repeat: 3 });
                    }
                });
                
                // Spawn pods with animation
                allPodInstances.forEach((pods, i) => {
                    gsap.to(pods.material, { opacity: 0.9, duration: 0.6, delay: 1 + i * 0.2 });
                });
                
                // Service mesh connections
                connectionLines.forEach((line, i) => {
                    if (line.userData.type === 'service-mesh') {
                        gsap.to(line.material, { opacity: 0.7, duration: 0.5, delay: 1.3 + i * 0.1 });
                    }
                });
                
                // Trigger deployment burst
                triggerDeploymentBurst();
            },
            onLeaveBack: () => {
                currentScrollStage = 2;
                
                gsap.to(camera.position, { x: -2, y: 3, z: 10, duration: 1 });
                gsap.to(k8sCluster.position, { x: 2, y: 0, duration: 1 });
                gsap.to(k8sCluster.rotation, { y: 0, duration: 1 });
                gsap.to(heroCloudMaterial, { opacity: 0.05, duration: 0.8 });
                
                // Hide cluster elements
                nodes.forEach(node => {
                    gsap.to(node.scale, { x: 0, y: 0, z: 0, duration: 0.5 });
                });
                gsap.to(masterNodeMaterial, { opacity: 0, duration: 0.4 });
                gsap.to(workerNodeMaterial, { opacity: 0, duration: 0.4 });
                
                connectionLines.forEach(line => {
                    gsap.to(line.material, { opacity: 0, duration: 0.4 });
                });
                
                allPodInstances.forEach(pods => {
                    gsap.to(pods.material, { opacity: 0, duration: 0.4 });
                });
            }
        });

        // ===========================================
        // STAGE 4: PROJECTS SECTION - Full Ecosystem
        // Pan right, reveal Lambda & traffic, deployment burst
        // ===========================================
        ScrollTrigger.create({
            trigger: "#projects",
            start: "top 80%",
            end: "bottom 20%",
            onEnter: () => {
                currentScrollStage = 4;
                
                // Pan right to show Lambda alongside cluster
                gsap.to(camera.position, { x: 3, y: 3, z: 12, duration: 1.2 });
                gsap.to(k8sCluster.position, { x: -2, y: 0, duration: 1 });
                gsap.to(k8sCluster.rotation, { y: Math.PI * -0.1, duration: 1.2 });
                
                // Reveal Lambda functions with elastic animation
                lambdaFunctions.forEach((lambda, i) => {
                    gsap.to(lambda.scale, { x: 1, y: 1, z: 1, duration: 0.8, delay: i * 0.15, ease: "elastic.out(1, 0.5)" });
                    gsap.to(lambda.material, { opacity: 0.9, duration: 0.5, delay: i * 0.15 });
                });
                gsap.to(lambdaMaterial, { opacity: 0.9, duration: 0.6 });
                gsap.to(lambdaLineMaterial, { opacity: 0.7, duration: 0.8, delay: 0.3 });
                
                // Activate full traffic particles
                gsap.to(trafficMaterial, { opacity: 0.8, duration: 0.8, delay: 0.5 });
                
                // Speed up deployment particles
                for (let i = 0; i < deploySpeeds.length; i++) {
                    deploySpeeds[i] *= 1.5;
                }
                
                // Trigger deployment burst
                triggerDeploymentBurst();
                
                // Green success color for pipelines
                gsap.to(deployMaterial.color, { r: 6/255, g: 214/255, b: 160/255, duration: 0.5 });
            },
            onLeaveBack: () => {
                currentScrollStage = 3;
                
                gsap.to(camera.position, { x: 0, y: 5, z: 9, duration: 1 });
                gsap.to(k8sCluster.position, { x: 0, y: 0, duration: 1 });
                gsap.to(k8sCluster.rotation, { y: Math.PI * 0.15, duration: 1 });
                
                // Hide Lambda
                lambdaFunctions.forEach(lambda => {
                    gsap.to(lambda.scale, { x: 0, y: 0, z: 0, duration: 0.5 });
                    gsap.to(lambda.material, { opacity: 0, duration: 0.4 });
                });
                gsap.to(lambdaMaterial, { opacity: 0, duration: 0.4 });
                gsap.to(lambdaLineMaterial, { opacity: 0, duration: 0.4 });
                gsap.to(trafficMaterial, { opacity: 0, duration: 0.5 });
                
                // Restore speeds
                for (let i = 0; i < deploySpeeds.length; i++) {
                    deploySpeeds[i] /= 1.5;
                }
            }
        });

        // ===========================================
        // STAGE 5: EDUCATION/CONTACT - Overview
        // Zoom out to z=16, show Terraform grid & orbiting tools
        // ===========================================
        ScrollTrigger.create({
            trigger: "#education",
            start: "top 80%",
            end: "bottom 20%",
            onEnter: () => {
                currentScrollStage = 5;
                
                // Zoom out for full overview - higher angle
                gsap.to(camera.position, { x: 0, y: 8, z: 18, duration: 1.5, ease: "power2.out" });
                gsap.to(k8sCluster.position, { x: 0, y: 0, duration: 1.2 });
                gsap.to(k8sCluster.rotation, { y: Math.PI * 0.25, duration: 1.5 });
                
                // Reveal Terraform grid
                terraformGrid.children.forEach((child, i) => {
                    if (child.material) {
                        gsap.to(child.material, { opacity: 0.15, duration: 0.8, delay: i * 0.1 });
                    }
                });
                gsap.to(terraformGrid.position, { y: 0, duration: 1 });
                
                // Fade in orbiting Helm/Terraform icons
                orbitingIcons.children.forEach((icon, i) => {
                    gsap.to(icon.scale, { x: 1, y: 1, z: 1, duration: 0.6, delay: 0.5 + i * 0.1, ease: "back.out(1.7)" });
                    gsap.to(icon.material, { opacity: 0.9, duration: 0.5, delay: 0.5 + i * 0.1 });
                });
            },
            onLeaveBack: () => {
                currentScrollStage = 4;
                
                gsap.to(camera.position, { x: 3, y: 3, z: 12, duration: 1 });
                gsap.to(k8sCluster.position, { x: -2, y: 0, duration: 1 });
                gsap.to(k8sCluster.rotation, { y: Math.PI * -0.1, duration: 1 });
                
                // Hide Terraform grid
                terraformGrid.children.forEach(child => {
                    if (child.material) gsap.to(child.material, { opacity: 0, duration: 0.5 });
                });
                
                // Hide orbiting icons
                orbitingIcons.children.forEach(icon => {
                    gsap.to(icon.scale, { x: 0, y: 0, z: 0, duration: 0.4 });
                    gsap.to(icon.material, { opacity: 0, duration: 0.4 });
                });
            }
        });

        // Contact section - final state
        ScrollTrigger.create({
            trigger: "#contact",
            start: "top 80%",
            end: "bottom bottom",
            onEnter: () => {
                // Final overview position - cinematic slow rotation
                gsap.to(camera.position, { x: 0, y: 6, z: 20, duration: 1.2 });
                gsap.to(k8sCluster.rotation, { y: Math.PI * 0.5, duration: 3, ease: "power1.inOut" });
            },
            onLeaveBack: () => {
                gsap.to(camera.position, { x: 0, y: 8, z: 18, duration: 1 });
                gsap.to(k8sCluster.rotation, { y: Math.PI * 0.25, duration: 1 });
            }
        });

        // Hero section scroll animations
        gsap.from(".hero-subtitle", {
            opacity: 0,
            y: 30,
            duration: 1,
            ease: "power3.out",
            delay: 0.2
        });

        gsap.from(".hero-title", {
            opacity: 0,
            y: 50,
            duration: 1.2,
            ease: "power3.out",
            delay: 0.4
        });

        gsap.from(".hero-bio", {
            opacity: 0,
            y: 40,
            duration: 1,
            ease: "power3.out",
            delay: 0.6
        });

        gsap.from(".hero-tag", {
            opacity: 0,
            y: 20,
            duration: 0.6,
            stagger: 0.1,
            ease: "power3.out",
            delay: 0.8
        });

        // Parallax effect on hero content when scrolling
        gsap.to(".hero-content", {
            y: -100,
            opacity: 0,
            scrollTrigger: {
                trigger: "#hero",
                start: "top top",
                end: "bottom top",
                scrub: 1
            }
        });

        gsap.to(".progress-bar", {
            height: "100%",
            scrollTrigger: { scrub: 0.3 }
        });

        // Timeline section scroll animations
        gsap.from(".timeline-header", {
            opacity: 0,
            y: 50,
            duration: 1,
            ease: "power3.out",
            scrollTrigger: {
                trigger: "#experience",
                start: "top 80%",
                toggleActions: "play none none reverse"
            }
        });
        
        // DevOps Metrics Counter Animation
        gsap.utils.toArray(".metric-value").forEach((counter) => {
            const targetValue = parseInt(counter.getAttribute("data-value"));
            gsap.to(counter, {
                innerText: targetValue,
                duration: 2,
                ease: "power2.out",
                snap: { innerText: 1 },
                scrollTrigger: {
                    trigger: counter,
                    start: "top 85%",
                    toggleActions: "play none none none"
                },
                onUpdate: function() {
                    counter.innerText = Math.floor(this.targets()[0].innerText);
                }
            });
        });

        gsap.utils.toArray(".timeline-item").forEach((item, i) => {
            gsap.to(item, {
                opacity: 1,
                duration: 0.8,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: item,
                    start: "top 85%",
                    toggleActions: "play none none reverse"
                }
            });
            
            gsap.from(item.querySelector(".timeline-content"), {
                x: 50,
                duration: 0.8,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: item,
                    start: "top 85%",
                    toggleActions: "play none none reverse"
                }
            });

            gsap.from(item.querySelector(".timeline-date"), {
                x: -30,
                opacity: 0,
                duration: 0.6,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: item,
                    start: "top 85%",
                    toggleActions: "play none none reverse"
                }
            });
        });

        // ===========================================
        // ADDITIONAL UI SCROLL ANIMATIONS (Non-conflicting)
        // ===========================================

        // Project Cards Particle Effects
        document.querySelectorAll('.project-card-enhanced').forEach(card => {
            const canvas = card.querySelector('.project-particles');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            let particles = [];
            let animationId = null;
            let isHovering = false;

            function resizeCanvas() {
                canvas.width = card.offsetWidth;
                canvas.height = card.offsetHeight;
            }

            function createParticle(x, y) {
                return {
                    x: x || Math.random() * canvas.width,
                    y: y || Math.random() * canvas.height,
                    size: Math.random() * 3 + 1,
                    speedX: (Math.random() - 0.5) * 2,
                    speedY: (Math.random() - 0.5) * 2,
                    opacity: Math.random() * 0.7 + 0.3,
                    color: Math.random() > 0.5 ? '#7000ff' : '#00ffcc'
                };
            }

            function animate() {
                if (!isHovering) return;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach((p, index) => {
                    p.x += p.speedX;
                    p.y += p.speedY;
                    p.opacity -= 0.01;

                    if (p.opacity <= 0) {
                        particles.splice(index, 1);
                        if (isHovering) particles.push(createParticle());
                    }

                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = p.color;
                    ctx.globalAlpha = p.opacity;
                    ctx.fill();
                });

                ctx.globalAlpha = 1;
                animationId = requestAnimationFrame(animate);
            }

            card.addEventListener('mouseenter', (e) => {
                isHovering = true;
                resizeCanvas();
                particles = Array.from({ length: 30 }, () => createParticle());
                animate();
            });

            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = ((e.clientX - rect.left) / rect.width) * 100;
                const y = ((e.clientY - rect.top) / rect.height) * 100;
                card.style.setProperty('--mouse-x', x + '%');
                card.style.setProperty('--mouse-y', y + '%');
                
                // Add particle at mouse position occasionally
                if (Math.random() > 0.7) {
                    particles.push(createParticle(e.clientX - rect.left, e.clientY - rect.top));
                }
            });

            card.addEventListener('mouseleave', () => {
                isHovering = false;
                if (animationId) cancelAnimationFrame(animationId);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles = [];
            });

            // Initial resize
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
        });

        // Project cards GSAP scroll animations
        gsap.utils.toArray('.project-card-enhanced').forEach((card, i) => {
            gsap.from(card, {
                opacity: 0,
                y: 50,
                duration: 0.8,
                delay: i * 0.1,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: card,
                    start: "top 85%",
                    toggleActions: "play none none reverse"
                }
            });
        });

        // Education & Certifications GSAP scroll animations
        gsap.from(".edu-certs-header", {
            opacity: 0,
            y: 40,
            duration: 1,
            ease: "power3.out",
            scrollTrigger: {
                trigger: "#education",
                start: "top 80%",
                toggleActions: "play none none reverse"
            }
        });

        // Education timeline items fade in
        gsap.utils.toArray('.edu-item').forEach((item, i) => {
            gsap.to(item, {
                opacity: 1,
                duration: 0.8,
                delay: i * 0.2,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: ".edu-timeline",
                    start: "top 80%",
                    toggleActions: "play none none reverse"
                }
            });

            gsap.from(item, {
                x: -30,
                duration: 0.8,
                delay: i * 0.2,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: ".edu-timeline",
                    start: "top 80%",
                    toggleActions: "play none none reverse"
                }
            });
        });

        // Certification cards fade in
        gsap.utils.toArray('.cert-card').forEach((card, i) => {
            gsap.to(card, {
                opacity: 1,
                duration: 0.6,
                delay: i * 0.15,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: ".certs-grid-enhanced",
                    start: "top 80%",
                    toggleActions: "play none none reverse"
                }
            });

            gsap.from(card, {
                x: 30,
                duration: 0.6,
                delay: i * 0.15,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: ".certs-grid-enhanced",
                    start: "top 80%",
                    toggleActions: "play none none reverse"
                }
            });
        });

        // Languages Section GSAP animations
        gsap.from(".languages-section .glass-panel", {
            opacity: 0,
            y: 50,
            duration: 1,
            ease: "power3.out",
            scrollTrigger: {
                trigger: "#languages",
                start: "top 80%",
                toggleActions: "play none none reverse"
            }
        });

        gsap.utils.toArray('.language-item').forEach((item, i) => {
            gsap.from(item, {
                opacity: 0,
                x: -30,
                duration: 0.6,
                delay: i * 0.15,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: ".languages-grid",
                    start: "top 85%",
                    toggleActions: "play none none reverse"
                }
            });
        });

        // Resume Section GSAP animations
        gsap.from(".resume-header", {
            opacity: 0,
            y: 40,
            duration: 1,
            ease: "power3.out",
            scrollTrigger: {
                trigger: "#resume",
                start: "top 80%",
                toggleActions: "play none none reverse"
            }
        });

        gsap.from(".resume-preview", {
            opacity: 0,
            scale: 0.95,
            duration: 0.8,
            ease: "power3.out",
            scrollTrigger: {
                trigger: ".resume-content",
                start: "top 80%",
                toggleActions: "play none none reverse"
            }
        });

        gsap.from(".resume-actions", {
            opacity: 0,
            y: 20,
            duration: 0.6,
            delay: 0.2,
            ease: "power3.out",
            scrollTrigger: {
                trigger: ".resume-content",
                start: "top 80%",
                toggleActions: "play none none reverse"
            }
        });

        // Contact Section GSAP animations
        gsap.from(".contact-link-item", {
            opacity: 0,
            y: 20,
            duration: 0.5,
            stagger: 0.1,
            ease: "power3.out",
            scrollTrigger: {
                trigger: "#contact",
                start: "top 80%",
                toggleActions: "play none none reverse"
            }
        });

        // Keyboard Navigation for Timeline
        const timelineItems = document.querySelectorAll('.timeline-item[tabindex]');
        timelineItems.forEach((item, index) => {
            item.addEventListener('keydown', (e) => {
                let targetIndex;
                
                switch(e.key) {
                    case 'ArrowDown':
                    case 'ArrowRight':
                        e.preventDefault();
                        targetIndex = (index + 1) % timelineItems.length;
                        timelineItems[targetIndex].focus();
                        break;
                    case 'ArrowUp':
                    case 'ArrowLeft':
                        e.preventDefault();
                        targetIndex = (index - 1 + timelineItems.length) % timelineItems.length;
                        timelineItems[targetIndex].focus();
                        break;
                    case 'Home':
                        e.preventDefault();
                        timelineItems[0].focus();
                        break;
                    case 'End':
                        e.preventDefault();
                        timelineItems[timelineItems.length - 1].focus();
                        break;
                    case 'Enter':
                    case ' ':
                        e.preventDefault();
                        // Expand/collapse or navigate to details
                        item.classList.toggle('expanded');
                        break;
                }
            });
        });

        // Announce theme change to screen readers
        const originalToggleMode = toggleMode;
        toggleMode = function() {
            originalToggleMode();
            const theme = document.body.classList.contains('light-mode') ? 'light' : 'dark';
            announceToScreenReader(`Theme changed to ${theme} mode`);
        };

        function announceToScreenReader(message) {
            const announcement = document.createElement('div');
            announcement.setAttribute('role', 'status');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.className = 'visually-hidden';
            announcement.textContent = message;
            document.body.appendChild(announcement);
            setTimeout(() => announcement.remove(), 1000);
        }

        // Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            
            // Also resize architecture view if active
            if (isArchitectureViewActive && archRenderer && archCamera) {
                archRenderer.setSize(window.innerWidth, window.innerHeight);
                archCamera.aspect = window.innerWidth / window.innerHeight;
                archCamera.updateProjectionMatrix();
            }
        });

        // ============================================
        // Custom Cursor Animation
        // ============================================
        const cursor = document.querySelector('.custom-cursor');
        const cursorDot = document.querySelector('.custom-cursor-dot');
        
        // Check if device supports hover (not touch-only)
        const supportsHover = window.matchMedia('(hover: hover) and (pointer: fine)').matches;
        
        if (supportsHover && cursor && cursorDot) {
            let mouseX = 0;
            let mouseY = 0;
            let cursorX = 0;
            let cursorY = 0;
            let dotX = 0;
            let dotY = 0;
            
            // Lerp function for smooth interpolation
            const lerp = (start, end, factor) => start + (end - start) * factor;
            
            // Track mouse position
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            // Animate cursor with smooth lag effect
            function animateCursor() {
                // Outer cursor follows with more lag
                cursorX = lerp(cursorX, mouseX, 0.15);
                cursorY = lerp(cursorY, mouseY, 0.15);
                cursor.style.left = cursorX + 'px';
                cursor.style.top = cursorY + 'px';
                
                // Inner dot follows more closely
                dotX = lerp(dotX, mouseX, 0.35);
                dotY = lerp(dotY, mouseY, 0.35);
                cursorDot.style.left = dotX + 'px';
                cursorDot.style.top = dotY + 'px';
                
                requestAnimationFrame(animateCursor);
            }
            animateCursor();
            
            // Interactive elements that trigger hover state
            const interactiveElements = document.querySelectorAll(
                'a, button, .glass-panel, .timeline-item, .project-card, ' +
                '.skill-category, .cert-card, .mode-toggle, input, textarea, ' +
                '.cta-button, .nav-link, .social-link, [role="button"], ' +
                '.project-card-enhanced, .skill-item, .soft-skill, .hero-tag, ' +
                '.language-item, .contact-link-item, .resume-download, .resume-view'
            );
            
            interactiveElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursor.classList.add('cursor-hover');
                });
                
                el.addEventListener('mouseleave', () => {
                    cursor.classList.remove('cursor-hover');
                });
            });
            
            // Click effect
            document.addEventListener('mousedown', () => {
                cursor.classList.add('cursor-click');
            });
            
            document.addEventListener('mouseup', () => {
                cursor.classList.remove('cursor-click');
            });
            
            // Hide cursor when leaving window
            document.addEventListener('mouseleave', () => {
                cursor.style.opacity = '0';
                cursorDot.style.opacity = '0';
            });
            
            document.addEventListener('mouseenter', () => {
                cursor.style.opacity = '';
                cursorDot.style.opacity = '';
            });
        }

        // ============================================
        // Smooth Scroll Navigation
        // ============================================
        const sideNavLinks = document.querySelectorAll('.side-nav-link');
        const sections = document.querySelectorAll('section[id]');
        const sideNav = document.getElementById('sideNav');
        const sideNavToggle = document.getElementById('sideNavToggle');

        // Smooth scroll on click
        sideNavLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href');
                const targetSection = document.querySelector(targetId);
                
                if (targetSection) {
                    targetSection.scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                    
                    // Close mobile nav if open
                    if (sideNav.classList.contains('open')) {
                        sideNav.classList.remove('open');
                        sideNavToggle.setAttribute('aria-expanded', 'false');
                    }
                }
            });
        });

        // Update active nav link on scroll
        function updateActiveNavLink() {
            const scrollPos = window.scrollY + window.innerHeight / 3;
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                const sectionId = section.getAttribute('id');
                
                if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                    sideNavLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${sectionId}`) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }

        window.addEventListener('scroll', updateActiveNavLink);
        updateActiveNavLink(); // Initial call

        // Mobile nav toggle
        if (sideNavToggle) {
            sideNavToggle.addEventListener('click', () => {
                const isOpen = sideNav.classList.toggle('open');
                sideNavToggle.setAttribute('aria-expanded', isOpen);
                sideNavToggle.innerHTML = isOpen ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
            });
        }

        // ============================================
        // Update interactive elements for cursor
        // ============================================
        const additionalInteractiveElements = document.querySelectorAll('.side-nav-link, .social-link, .side-nav-toggle');
        additionalInteractiveElements.forEach(el => {
            el.addEventListener('mouseenter', () => {
                if (cursor) cursor.classList.add('cursor-hover');
            });
            el.addEventListener('mouseleave', () => {
                if (cursor) cursor.classList.remove('cursor-hover');
            });
        });

        // ============================================
        // Full Architecture View - Interactive 3D Mode
        // Renders the SAME scene with live animations
        // ============================================
        const viewArchitectureBtn = document.getElementById('viewArchitectureBtn');
        const architectureModal = document.getElementById('architectureModal');
        const closeArchitectureBtn = document.getElementById('closeArchitectureBtn');
        const architectureCanvas = document.getElementById('architectureCanvas');
        const zoomInBtn = document.getElementById('zoomInBtn');
        const zoomOutBtn = document.getElementById('zoomOutBtn');
        const resetViewBtn = document.getElementById('resetViewBtn');
        const autoRotateBtn = document.getElementById('autoRotateBtn');

        let archCamera, archRenderer, archControls;
        let isArchitectureViewActive = false;
        let savedMaterialStates = new Map();

        function initArchitectureView() {
            // Create a separate camera for architecture view
            archCamera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
            archCamera.position.set(25, 18, 30);

            // Create renderer for the architecture canvas
            archRenderer = new THREE.WebGLRenderer({
                canvas: architectureCanvas,
                antialias: true,
                alpha: true
            });
            archRenderer.setSize(window.innerWidth, window.innerHeight);
            archRenderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

            // Add OrbitControls - this will control the view of the SAME scene
            archControls = new THREE.OrbitControls(archCamera, archRenderer.domElement);
            archControls.enableDamping = true;
            archControls.dampingFactor = 0.05;
            archControls.enableZoom = true;
            archControls.minDistance = 5;
            archControls.maxDistance = 80;
            archControls.enablePan = true;
            archControls.autoRotate = false;
            archControls.autoRotateSpeed = 1.5;
            archControls.target.set(0, 0, 0);
        }

        function revealAllObjects() {
            // Save current states and reveal all objects for full view
            savedMaterialStates.clear();
            
            // Materials to reveal with target opacities
            const materialsConfig = [
                { mat: gitMaterial, opacity: 1 },
                { mat: gitRingMaterial, opacity: 0.8 },
                { mat: gitIndicatorMaterial, opacity: 1 },
                { mat: registryMaterial, opacity: 1 },
                { mat: masterNodeMaterial, opacity: 1 },
                { mat: workerNodeMaterial, opacity: 1 },
                { mat: pipelineMaterial, opacity: 1 },
                { mat: deployMaterial, opacity: 1 },
                { mat: lambdaMaterial, opacity: 1 },
                { mat: lambdaLineMaterial, opacity: 0.8 },
                { mat: trafficMaterial, opacity: 0.8 },
                { mat: awsBoundaryMaterial, opacity: 0.6 },
                { mat: cloudMaterial, opacity: 0.7 }
            ];
            
            materialsConfig.forEach(({ mat, opacity }) => {
                if (mat) {
                    savedMaterialStates.set(mat, { opacity: mat.opacity });
                    mat.opacity = opacity;
                }
            });
            
            // CI/CD lines
            [ciLine, cdLine].forEach(line => {
                if (line && line.material) {
                    savedMaterialStates.set(line.material, { opacity: line.material.opacity });
                    line.material.opacity = 0.8;
                }
            });
            
            // Scale up hidden objects
            [gitIcon, gitRing, registryGroup].forEach(obj => {
                if (obj) {
                    savedMaterialStates.set(obj, { scale: obj.scale.clone() });
                    gsap.to(obj.scale, { x: 1, y: 1, z: 1, duration: 0.5 });
                }
            });
            
            // Nodes and lambdas
            [...nodes, ...lambdaFunctions].forEach(obj => {
                if (obj) {
                    savedMaterialStates.set(obj, { scale: obj.scale.clone() });
                    gsap.to(obj.scale, { x: 1, y: 1, z: 1, duration: 0.5 });
                }
            });
            
            // Git indicators
            if (typeof gitIndicators !== 'undefined') {
                gitIndicators.forEach(ind => {
                    savedMaterialStates.set(ind, { scale: ind.scale.clone() });
                    gsap.to(ind.scale, { x: 1, y: 1, z: 1, duration: 0.5 });
                    if (ind.material) {
                        savedMaterialStates.set(ind.material, { opacity: ind.material.opacity });
                        ind.material.opacity = 1;
                    }
                });
            }
            
            // Pods and connections
            allPodInstances.forEach(pods => {
                if (pods.material) {
                    savedMaterialStates.set(pods.material, { opacity: pods.material.opacity });
                    pods.material.opacity = 1;
                }
            });
            
            connectionLines.forEach(line => {
                if (line.material) {
                    savedMaterialStates.set(line.material, { opacity: line.material.opacity });
                    line.material.opacity = 0.8;
                }
            });
            
            // Orbiting icons
            if (typeof orbitingIcons !== 'undefined') {
                orbitingIcons.children.forEach(icon => {
                    savedMaterialStates.set(icon, { scale: icon.scale.clone() });
                    gsap.to(icon.scale, { x: 1, y: 1, z: 1, duration: 0.5 });
                    if (icon.material) {
                        savedMaterialStates.set(icon.material, { opacity: icon.material.opacity });
                        icon.material.opacity = 1;
                    }
                });
            }
            
            // Terraform grid
            if (typeof terraformGrid !== 'undefined') {
                terraformGrid.children.forEach(child => {
                    if (child.material) {
                        savedMaterialStates.set(child.material, { opacity: child.material.opacity });
                        child.material.opacity = 0.4;
                    }
                });
            }
            
            // Cloud puffs
            if (typeof cloudGroup !== 'undefined') {
                cloudGroup.children.forEach(child => {
                    if (child.type === 'Group') {
                        child.children.forEach(sphere => {
                            if (sphere.material) {
                                savedMaterialStates.set(sphere.material, { opacity: sphere.material.opacity });
                                sphere.material.opacity = 0.7;
                            }
                        });
                    }
                });
            }
        }

        function restoreAllObjects() {
            // Restore all saved material/scale states
            savedMaterialStates.forEach((state, obj) => {
                if (state.opacity !== undefined && obj.opacity !== undefined) {
                    obj.opacity = state.opacity;
                }
                if (state.scale && obj.scale) {
                    gsap.to(obj.scale, { 
                        x: state.scale.x, 
                        y: state.scale.y, 
                        z: state.scale.z, 
                        duration: 0.3 
                    });
                }
            });
            savedMaterialStates.clear();
        }

        function renderArchitectureView() {
            if (!isArchitectureViewActive) return;
            
            requestAnimationFrame(renderArchitectureView);
            
            if (archControls) {
                archControls.update();
            }
            
            // Render the SAME scene with the architecture camera - all animations stay live!
            if (archRenderer && scene && archCamera) {
                archRenderer.render(scene, archCamera);
            }
        }

        function openArchitectureView() {
            isArchitectureViewActive = true;
            architectureModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Initialize renderer/camera if needed
            if (!archRenderer) {
                initArchitectureView();
            }
            
            // Resize to current viewport (important for mobile orientation changes)
            if (archRenderer && archCamera) {
                archRenderer.setSize(window.innerWidth, window.innerHeight);
                archCamera.aspect = window.innerWidth / window.innerHeight;
                archCamera.updateProjectionMatrix();
            }
            
            // Add mouse events for tooltips in architecture view
            architectureCanvas.addEventListener('mousemove', onMouseMove, false);
            architectureCanvas.addEventListener('click', onClick, false);
            
            // Add touch events for mobile
            architectureCanvas.addEventListener('touchstart', onTouchStart, false);
            architectureCanvas.addEventListener('touchend', onTouchEnd, false);
            
            // Reveal all objects so user can see complete architecture
            revealAllObjects();
            
            // Reset camera position - closer for mobile
            const isMobile = window.innerWidth <= 768;
            if (isMobile) {
                archCamera.position.set(35, 25, 40);
            } else {
                archCamera.position.set(25, 18, 30);
            }
            archControls.target.set(0, 0, 0);
            archControls.update();
            
            // Start rendering loop for architecture view
            renderArchitectureView();

            // Pause scroll triggers (but animations keep running)
            ScrollTrigger.getAll().forEach(st => st.disable());
        }
        
        // Touch event handlers for mobile
        let touchStartTime = 0;
        
        function onTouchStart(event) {
            touchStartTime = Date.now();
        }
        
        function onTouchEnd(event) {
            // Only trigger tooltip on quick taps (not drags)
            const touchDuration = Date.now() - touchStartTime;
            if (touchDuration < 200 && event.changedTouches.length === 1) {
                const touch = event.changedTouches[0];
                // Create a synthetic mouse event for the tooltip
                const mouseEvent = {
                    clientX: touch.clientX,
                    clientY: touch.clientY,
                    preventDefault: () => {}
                };
                onClick(mouseEvent);
            }
        }

        function closeArchitectureView() {
            isArchitectureViewActive = false;
            architectureModal.classList.remove('active');
            document.body.style.overflow = '';
            
            // Remove architecture canvas mouse listeners
            architectureCanvas.removeEventListener('mousemove', onMouseMove, false);
            architectureCanvas.removeEventListener('click', onClick, false);
            
            // Remove touch listeners
            architectureCanvas.removeEventListener('touchstart', onTouchStart, false);
            architectureCanvas.removeEventListener('touchend', onTouchEnd, false);
            
            // Hide any open tooltip
            hideTooltip();
            isTooltipLocked = false;
            
            // Restore objects to their scroll-based states
            restoreAllObjects();
            
            // Re-enable scroll triggers
            ScrollTrigger.getAll().forEach(st => st.enable());
            
            // Stop auto-rotate
            if (archControls) {
                archControls.autoRotate = false;
                autoRotateBtn.classList.remove('active');
            }
        }

        // Event listeners
        viewArchitectureBtn.addEventListener('click', openArchitectureView);
        closeArchitectureBtn.addEventListener('click', closeArchitectureView);

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && isArchitectureViewActive) {
                closeArchitectureView();
            }
        });

        // Zoom controls
        zoomInBtn.addEventListener('click', () => {
            if (archCamera) {
                gsap.to(archCamera.position, {
                    x: archCamera.position.x * 0.8,
                    y: archCamera.position.y * 0.8,
                    z: archCamera.position.z * 0.8,
                    duration: 0.3
                });
            }
        });

        zoomOutBtn.addEventListener('click', () => {
            if (archCamera) {
                gsap.to(archCamera.position, {
                    x: archCamera.position.x * 1.25,
                    y: archCamera.position.y * 1.25,
                    z: archCamera.position.z * 1.25,
                    duration: 0.3
                });
            }
        });

        // Reset view
        resetViewBtn.addEventListener('click', () => {
            if (archCamera && archControls) {
                gsap.to(archCamera.position, {
                    x: 25, y: 18, z: 30,
                    duration: 1,
                    ease: 'power2.out'
                });
                gsap.to(archControls.target, {
                    x: 0, y: 0, z: 0,
                    duration: 1,
                    ease: 'power2.out'
                });
            }
        });

        // Auto-rotate toggle
        autoRotateBtn.addEventListener('click', () => {
            if (archControls) {
                archControls.autoRotate = !archControls.autoRotate;
                autoRotateBtn.classList.toggle('active', archControls.autoRotate);
            }
        });

        // Handle window resize for architecture view
        window.addEventListener('resize', () => {
            if (isArchitectureViewActive && archCamera && archRenderer) {
                archCamera.aspect = window.innerWidth / window.innerHeight;
                archCamera.updateProjectionMatrix();
                archRenderer.setSize(window.innerWidth, window.innerHeight);
            }
        });
    </script>
</body>
</html>